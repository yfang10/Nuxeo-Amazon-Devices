/*! For license information please see pdf.image_decoders.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pdfjs-dist/image_decoders/pdf.image_decoders",[],t):"object"==typeof exports?exports["pdfjs-dist/image_decoders/pdf.image_decoders"]=t():e["pdfjs-dist/image_decoders/pdf.image_decoders"]=e.pdfjsImageDecoders=t()}(this,(function(){return(()=>{"use strict";var e=[,(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=f,t.arraysToBytes=function(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let n=0;for(let i=0;i<t;i++)n+=f(e[i]);let i=0;const s=new Uint8Array(n);for(let n=0;n<t;n++){let t=e[n];t instanceof Uint8Array||(t="string"==typeof t?d(t):new Uint8Array(t));const r=t.byteLength;s.set(t,i),i+=r}return s},t.assert=a,t.bytesToString=function(e){a(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let s=0;s<t;s+=n){const r=Math.min(s+n,t),o=e.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")},t.createObjectURL=function(e,t="",n=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!n)return URL.createObjectURL(new Blob([e],{type:t}));const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s=`data:${t};base64,`;for(let t=0,n=e.length;t<n;t+=3){const r=255&e[t],o=255&e[t+1],a=255&e[t+2];s+=i[r>>2]+i[(3&r)<<4|o>>4]+i[t+1<n?(15&o)<<2|a>>6:64]+i[t+2<n?63&a:64]}return s},t.createPromiseCapability=function(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get:()=>t}),e.promise=new Promise((function(n,i){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,i(e)}})),e},t.createValidAbsoluteUrl=function(e,t=null,n=null){if(!e)return null;try{if(n&&"string"==typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t&&t.length>=2&&(e=`http://${e}`)}if(n.tryConvertEncoding)try{e=x(e)}catch(e){}}const i=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch(e){}return null},t.escapeString=function(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))},t.getModificationDate=function(e=new Date){return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getVerbosityLevel=function(){return s},t.info=function(e){s>=i.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},t.isAscii=function(e){return/^[\x00-\x7F]*$/.test(e)},t.isBool=function(e){return"boolean"==typeof e},t.isNum=function(e){return"number"==typeof e},t.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(e){return!1}const i=new URL(t,n);return n.origin===i.origin},t.isString=function(e){return"string"==typeof e},t.objectFromMap=function(e){const t=Object.create(null);for(const[n,i]of e)t[n]=i;return t},t.objectSize=function(e){return Object.keys(e).length},t.removeNullCharacters=function(e,t=!1){return"string"!=typeof e?(r("The argument for removeNullCharacters must be a string."),e):(t&&(e=e.replace(u," ")),e.replace(h,""))},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(s=e)},t.shadow=c,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=d,t.stringToPDFString=function(e){const t=e.length,n=[];if("þ"===e[0]&&"ÿ"===e[1])for(let i=2;i<t;i+=2)n.push(String.fromCharCode(e.charCodeAt(i)<<8|e.charCodeAt(i+1)));else if("ÿ"===e[0]&&"þ"===e[1])for(let i=2;i<t;i+=2)n.push(String.fromCharCode(e.charCodeAt(i+1)<<8|e.charCodeAt(i)));else for(let i=0;i<t;++i){const t=y[e.charCodeAt(i)];n.push(t?String.fromCharCode(t):e.charAt(i))}return n.join("")},t.stringToUTF16BEString=function(e){const t=["þÿ"];for(let n=0,i=e.length;n<i;n++){const i=e.charCodeAt(n);t.push(String.fromCharCode(i>>8&255),String.fromCharCode(255&i))}return t.join("")},t.stringToUTF8String=x,t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=r,n(2),t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"},t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const i={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=i,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let s=i.WARNINGS;function r(e){s>=i.WARNINGS&&console.log(`Warning: ${e}`)}function o(e){throw new Error(e)}function a(e,t){e||o(t)}function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}const l=function(){function e(t,n){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=l,t.PasswordException=class extends l{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends l{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends l{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends l{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends l{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends l{constructor(e){super(e,"FormatError")}},t.AbortException=class extends l{constructor(e){super(e,"AbortException")}};const h=/\x00+/g,u=/[\x01-\x1F]/g;function d(e){a("string"==typeof e,"Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}function f(e){return void 0!==e.length?e.length:(a(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}const p={get value(){return c(this,"value",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}};t.IsLittleEndianCached=p;const g={get value(){return c(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=g;const m=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class b{static makeHexColor(e,t,n){return`#${m[e]}${m[t]}${m[n]}`}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=b.applyTransform(e,t),i=b.applyTransform(e.slice(2,4),t),s=b.applyTransform([e[0],e[3]],t),r=b.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],s[0],r[0]),Math.min(n[1],i[1],s[1],r[1]),Math.max(n[0],i[0],s[0],r[0]),Math.max(n[1],i[1],s[1],r[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],r=e[2]*t[1]+e[3]*t[3],o=(n+r)/2,a=Math.sqrt((n+r)**2-4*(n*r-s*i))/2,c=o+a||1,l=o-a||1;return[Math.sqrt(c),Math.sqrt(l)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){function n(e,t){return e-t}const i=[e[0],e[2],t[0],t[2]].sort(n),s=[e[1],e[3],t[1],t[3]].sort(n),r=[];return e=b.normalizeRect(e),t=b.normalizeRect(t),i[0]===e[0]&&i[1]===t[0]||i[0]===t[0]&&i[1]===e[0]?(r[0]=i[1],r[2]=i[2],s[0]===e[1]&&s[1]===t[1]||s[0]===t[1]&&s[1]===e[1]?(r[1]=s[1],r[3]=s[2],r):null):null}static bezierBoundingBox(e,t,n,i,s,r,o,a){const c=[],l=[[],[]];let h,u,d,f,p,g,m,b;for(let l=0;l<2;++l)if(0===l?(u=6*e-12*n+6*s,h=-3*e+9*n-9*s+3*o,d=3*n-3*e):(u=6*t-12*i+6*r,h=-3*t+9*i-9*r+3*a,d=3*i-3*t),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;f=-d/u,0<f&&f<1&&c.push(f)}else m=u*u-4*d*h,b=Math.sqrt(m),m<0||(p=(-u+b)/(2*h),0<p&&p<1&&c.push(p),g=(-u-b)/(2*h),0<g&&g<1&&c.push(g));let y,x=c.length;const w=x;for(;x--;)f=c[x],y=1-f,l[0][x]=y*y*y*e+3*y*y*f*n+3*y*f*f*s+f*f*f*o,l[1][x]=y*y*y*t+3*y*y*f*i+3*y*f*f*r+f*f*f*a;return l[0][w]=e,l[1][w]=t,l[0][w+1]=o,l[1][w+1]=a,l[0].length=l[1].length=w+2,[Math.min(...l[0]),Math.min(...l[1]),Math.max(...l[0]),Math.max(...l[1])]}}t.Util=b;const y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function x(e){return decodeURIComponent(escape(e))}},(e,t,n)=>{n(3)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Jbig2Image=void 0;var i=n(1),s=n(5),r=n(8),o=n(9);class a extends i.BaseException{constructor(e){super(`JBIG2 error: ${e}`,"Jbig2Error")}}class c{getContexts(e){return e in this?this[e]:this[e]=new Int8Array(65536)}}class l{constructor(e,t,n){this.data=e,this.start=t,this.end=n}get decoder(){const e=new r.ArithmeticDecoder(this.data,this.start,this.end);return(0,i.shadow)(this,"decoder",e)}get contextCache(){const e=new c;return(0,i.shadow)(this,"contextCache",e)}}function h(e,t,n){const i=e.getContexts(t);let s=1;function r(e){let t=0;for(let r=0;r<e;r++){const e=n.readBit(i,s);s=s<256?s<<1|e:511&(s<<1|e)|256,t=t<<1|e}return t>>>0}const o=r(1),a=r(1)?r(1)?r(1)?r(1)?r(1)?r(32)+4436:r(12)+340:r(8)+84:r(6)+20:r(4)+4:r(2);return 0===o?a:a>0?-a:null}function u(e,t,n){const i=e.getContexts("IAID");let s=1;for(let e=0;e<n;e++)s=s<<1|t.readBit(i,s);return n<31?s&(1<<n)-1:2147483647&s}const d=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],f=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],p=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],g=[39717,1941,229,405],m=[32,8];function b(e,t,n,i,s,r,o,a){if(e)return M(new _(a.data,a.start,a.end),t,n,!1);if(0===i&&!r&&!s&&4===o.length&&3===o[0].x&&-1===o[0].y&&-3===o[1].x&&-1===o[1].y&&2===o[2].x&&-2===o[2].y&&-2===o[3].x&&-2===o[3].y)return function(e,t,n){const i=n.decoder,s=n.contextCache.getContexts("GB"),r=[];let o,a,c,l,h,u,d;for(a=0;a<t;a++)for(h=r[a]=new Uint8Array(e),u=a<1?h:r[a-1],d=a<2?h:r[a-2],o=d[0]<<13|d[1]<<12|d[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4,c=0;c<e;c++)h[c]=l=i.readBit(s,o),o=(31735&o)<<1|(c+3<e?d[c+3]<<11:0)|(c+4<e?u[c+4]<<4:0)|l;return r}(t,n,a);const c=!!r,l=f[i].concat(o);l.sort((function(e,t){return e.y-t.y||e.x-t.x}));const h=l.length,u=new Int8Array(h),d=new Int8Array(h),p=[];let m,b,y=0,x=0,w=0,C=0;for(b=0;b<h;b++)u[b]=l[b].x,d[b]=l[b].y,x=Math.min(x,l[b].x),w=Math.max(w,l[b].x),C=Math.min(C,l[b].y),b<h-1&&l[b].y===l[b+1].y&&l[b].x===l[b+1].x-1?y|=1<<h-1-b:p.push(b);const T=p.length,P=new Int8Array(T),S=new Int8Array(T),I=new Uint16Array(T);for(m=0;m<T;m++)b=p[m],P[m]=l[b].x,S[m]=l[b].y,I[m]=1<<h-1-b;const k=-x,A=-C,E=t-w,O=g[i];let v=new Uint8Array(t);const L=[],D=a.decoder,B=a.contextCache.getContexts("GB");let R,F,U,N,z,X=0,j=0;for(let e=0;e<n;e++)if(s&&(X^=D.readBit(B,O),X))L.push(v);else for(v=new Uint8Array(v),L.push(v),R=0;R<t;R++){if(c&&r[e][R]){v[R]=0;continue}if(R>=k&&R<E&&e>=A)for(j=j<<1&y,b=0;b<T;b++)F=e+S[b],U=R+P[b],N=L[F][U],N&&(N=I[b],j|=N);else for(j=0,z=h-1,b=0;b<h;b++,z--)U=R+u[b],U>=0&&U<t&&(F=e+d[b],F>=0&&(N=L[F][U],N&&(j|=N<<z)));const n=D.readBit(B,j);v[R]=n}return L}function y(e,t,n,i,s,r,o,c,l){let h=p[n].coding;0===n&&(h=h.concat([c[0]]));const u=h.length,d=new Int32Array(u),f=new Int32Array(u);let g;for(g=0;g<u;g++)d[g]=h[g].x,f[g]=h[g].y;let b=p[n].reference;0===n&&(b=b.concat([c[1]]));const y=b.length,x=new Int32Array(y),w=new Int32Array(y);for(g=0;g<y;g++)x[g]=b[g].x,w[g]=b[g].y;const C=i[0].length,T=i.length,P=m[n],S=[],I=l.decoder,k=l.contextCache.getContexts("GR");let A=0;for(let n=0;n<t;n++){if(o&&(A^=I.readBit(k,P),A))throw new a("prediction is not supported");const t=new Uint8Array(e);S.push(t);for(let o=0;o<e;o++){let a,c,l=0;for(g=0;g<u;g++)a=n+f[g],c=o+d[g],a<0||c<0||c>=e?l<<=1:l=l<<1|S[a][c];for(g=0;g<y;g++)a=n+w[g]-r,c=o+x[g]-s,a<0||a>=T||c<0||c>=C?l<<=1:l=l<<1|i[a][c];const h=I.readBit(k,l);t[o]=h}}return S}function x(e,t,n,i,s,r,o,c,l,d,f,p,g,m,b,x,w,C,T){if(e&&t)throw new a("refinement with Huffman is not supported");const P=[];let S,I;for(S=0;S<i;S++){if(I=new Uint8Array(n),s)for(let e=0;e<n;e++)I[e]=s;P.push(I)}const k=w.decoder,A=w.contextCache;let E=e?-m.tableDeltaT.decode(T):-h(A,"IADT",k),O=0;for(S=0;S<r;){E+=e?m.tableDeltaT.decode(T):h(A,"IADT",k),O+=e?m.tableFirstS.decode(T):h(A,"IAFS",k);let i=O;for(;;){let s=0;o>1&&(s=e?T.readBits(C):h(A,"IAIT",k));const r=o*E+s,O=e?m.symbolIDTable.decode(T):u(A,k,l),v=t&&(e?T.readBit():h(A,"IARI",k));let L=c[O],_=L[0].length,D=L.length;if(v){const e=h(A,"IARDW",k),t=h(A,"IARDH",k);_+=e,D+=t,L=y(_,D,b,L,(e>>1)+h(A,"IARDX",k),(t>>1)+h(A,"IARDY",k),!1,x,w)}const B=r-(1&p?0:D-1),M=i-(2&p?_-1:0);let R,F,U;if(d){for(R=0;R<D;R++){if(I=P[M+R],!I)continue;U=L[R];const e=Math.min(n-B,_);switch(g){case 0:for(F=0;F<e;F++)I[B+F]|=U[F];break;case 2:for(F=0;F<e;F++)I[B+F]^=U[F];break;default:throw new a(`operator ${g} is not supported`)}}i+=D-1}else{for(F=0;F<D;F++)if(I=P[B+F],I)switch(U=L[F],g){case 0:for(R=0;R<_;R++)I[M+R]|=U[R];break;case 2:for(R=0;R<_;R++)I[M+R]^=U[R];break;default:throw new a(`operator ${g} is not supported`)}i+=_-1}S++;const N=e?m.tableDeltaS.decode(T):h(A,"IADS",k);if(null===N)break;i+=N+f}}return P}function w(e,t){const n={};n.number=(0,s.readUint32)(e,t);const i=e[t+4],r=63&i;if(!d[r])throw new a("invalid segment type: "+r);n.type=r,n.typeName=d[r],n.deferredNonRetain=!!(128&i);const o=!!(64&i),c=e[t+5];let l=c>>5&7;const h=[31&c];let u=t+6;if(7===c){l=536870911&(0,s.readUint32)(e,u-1),u+=3;let t=l+7>>3;for(h[0]=e[u++];--t>0;)h.push(e[u++])}else if(5===c||6===c)throw new a("invalid referred-to flags");n.retainBits=h;let f=4;n.number<=256?f=1:n.number<=65536&&(f=2);const p=[];let g,m;for(g=0;g<l;g++){let t;t=1===f?e[u]:2===f?(0,s.readUint16)(e,u):(0,s.readUint32)(e,u),p.push(t),u+=f}if(n.referredTo=p,o?(n.pageAssociation=(0,s.readUint32)(e,u),u+=4):n.pageAssociation=e[u++],n.length=(0,s.readUint32)(e,u),u+=4,4294967295===n.length){if(38!==r)throw new a("invalid unknown segment length");{const t=T(e,u),i=!!(1&e[u+P]),s=6,r=new Uint8Array(s);for(i||(r[0]=255,r[1]=172),r[2]=t.height>>>24&255,r[3]=t.height>>16&255,r[4]=t.height>>8&255,r[5]=255&t.height,g=u,m=e.length;g<m;g++){let t=0;for(;t<s&&r[t]===e[g+t];)t++;if(t===s){n.length=g+s;break}}if(4294967295===n.length)throw new a("segment end was not found")}}return n.headerEnd=u,n}function C(e,t,n,i){const s=[];let r=n;for(;r<i;){const n=w(t,r);r=n.headerEnd;const i={header:n,data:t};if(e.randomAccess||(i.start=r,r+=n.length,i.end=r),s.push(i),51===n.type)break}if(e.randomAccess)for(let e=0,t=s.length;e<t;e++)s[e].start=r,r+=s[e].header.length,s[e].end=r;return s}function T(e,t){return{width:(0,s.readUint32)(e,t),height:(0,s.readUint32)(e,t+4),x:(0,s.readUint32)(e,t+8),y:(0,s.readUint32)(e,t+12),combinationOperator:7&e[t+16]}}const P=17;function S(e,t){const n=e.header,i=e.data,r=e.end;let o,c,l,h,u=e.start;switch(n.type){case 0:const e={},t=(0,s.readUint16)(i,u);if(e.huffman=!!(1&t),e.refinement=!!(2&t),e.huffmanDHSelector=t>>2&3,e.huffmanDWSelector=t>>4&3,e.bitmapSizeSelector=t>>6&1,e.aggregationInstancesSelector=t>>7&1,e.bitmapCodingContextUsed=!!(256&t),e.bitmapCodingContextRetained=!!(512&t),e.template=t>>10&3,e.refinementTemplate=t>>12&1,u+=2,!e.huffman){for(h=0===e.template?4:1,c=[],l=0;l<h;l++)c.push({x:(0,s.readInt8)(i,u),y:(0,s.readInt8)(i,u+1)}),u+=2;e.at=c}if(e.refinement&&!e.refinementTemplate){for(c=[],l=0;l<2;l++)c.push({x:(0,s.readInt8)(i,u),y:(0,s.readInt8)(i,u+1)}),u+=2;e.refinementAt=c}e.numberOfExportedSymbols=(0,s.readUint32)(i,u),u+=4,e.numberOfNewSymbols=(0,s.readUint32)(i,u),u+=4,o=[e,n.number,n.referredTo,i,u,r];break;case 6:case 7:const d={};d.info=T(i,u),u+=P;const f=(0,s.readUint16)(i,u);if(u+=2,d.huffman=!!(1&f),d.refinement=!!(2&f),d.logStripSize=f>>2&3,d.stripSize=1<<d.logStripSize,d.referenceCorner=f>>4&3,d.transposed=!!(64&f),d.combinationOperator=f>>7&3,d.defaultPixelValue=f>>9&1,d.dsOffset=f<<17>>27,d.refinementTemplate=f>>15&1,d.huffman){const e=(0,s.readUint16)(i,u);u+=2,d.huffmanFS=3&e,d.huffmanDS=e>>2&3,d.huffmanDT=e>>4&3,d.huffmanRefinementDW=e>>6&3,d.huffmanRefinementDH=e>>8&3,d.huffmanRefinementDX=e>>10&3,d.huffmanRefinementDY=e>>12&3,d.huffmanRefinementSizeSelector=!!(16384&e)}if(d.refinement&&!d.refinementTemplate){for(c=[],l=0;l<2;l++)c.push({x:(0,s.readInt8)(i,u),y:(0,s.readInt8)(i,u+1)}),u+=2;d.refinementAt=c}d.numberOfSymbolInstances=(0,s.readUint32)(i,u),u+=4,o=[d,n.referredTo,i,u,r];break;case 16:const p={},g=i[u++];p.mmr=!!(1&g),p.template=g>>1&3,p.patternWidth=i[u++],p.patternHeight=i[u++],p.maxPatternIndex=(0,s.readUint32)(i,u),u+=4,o=[p,n.number,i,u,r];break;case 22:case 23:const m={};m.info=T(i,u),u+=P;const b=i[u++];m.mmr=!!(1&b),m.template=b>>1&3,m.enableSkip=!!(8&b),m.combinationOperator=b>>4&7,m.defaultPixelValue=b>>7&1,m.gridWidth=(0,s.readUint32)(i,u),u+=4,m.gridHeight=(0,s.readUint32)(i,u),u+=4,m.gridOffsetX=4294967295&(0,s.readUint32)(i,u),u+=4,m.gridOffsetY=4294967295&(0,s.readUint32)(i,u),u+=4,m.gridVectorX=(0,s.readUint16)(i,u),u+=2,m.gridVectorY=(0,s.readUint16)(i,u),u+=2,o=[m,n.referredTo,i,u,r];break;case 38:case 39:const y={};y.info=T(i,u),u+=P;const x=i[u++];if(y.mmr=!!(1&x),y.template=x>>1&3,y.prediction=!!(8&x),!y.mmr){for(h=0===y.template?4:1,c=[],l=0;l<h;l++)c.push({x:(0,s.readInt8)(i,u),y:(0,s.readInt8)(i,u+1)}),u+=2;y.at=c}o=[y,i,u,r];break;case 48:const w={width:(0,s.readUint32)(i,u),height:(0,s.readUint32)(i,u+4),resolutionX:(0,s.readUint32)(i,u+8),resolutionY:(0,s.readUint32)(i,u+12)};4294967295===w.height&&delete w.height;const C=i[u+16];(0,s.readUint16)(i,u+17),w.lossless=!!(1&C),w.refinement=!!(2&C),w.defaultPixelValue=C>>2&1,w.combinationOperator=C>>3&3,w.requiresBuffer=!!(32&C),w.combinationOperatorOverride=!!(64&C),o=[w];break;case 49:case 50:case 51:case 62:break;case 53:o=[n.number,i,u,r];break;default:throw new a(`segment type ${n.typeName}(${n.type}) is not implemented`)}const d="on"+n.typeName;d in t&&t[d].apply(t,o)}function I(e,t){for(let n=0,i=e.length;n<i;n++)S(e[n],t)}class k{onPageInformation(e){this.currentPageInfo=e;const t=e.width+7>>3,n=new Uint8ClampedArray(t*e.height);if(e.defaultPixelValue)for(let e=0,t=n.length;e<t;e++)n[e]=255;this.buffer=n}drawBitmap(e,t){const n=this.currentPageInfo,i=e.width,s=e.height,r=n.width+7>>3,o=n.combinationOperatorOverride?e.combinationOperator:n.combinationOperator,c=this.buffer,l=128>>(7&e.x);let h,u,d,f,p=e.y*r+(e.x>>3);switch(o){case 0:for(h=0;h<s;h++){for(d=l,f=p,u=0;u<i;u++)t[h][u]&&(c[f]|=d),d>>=1,d||(d=128,f++);p+=r}break;case 2:for(h=0;h<s;h++){for(d=l,f=p,u=0;u<i;u++)t[h][u]&&(c[f]^=d),d>>=1,d||(d=128,f++);p+=r}break;default:throw new a(`operator ${o} is not supported`)}}onImmediateGenericRegion(e,t,n,i){const s=e.info,r=new l(t,n,i),o=b(e.mmr,s.width,s.height,e.template,e.prediction,null,e.at,r);this.drawBitmap(s,o)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,arguments)}onSymbolDictionary(e,t,n,i,r,o){let c,d;e.huffman&&(c=function(e,t,n){let i,s,r,o,c=0;switch(e.huffmanDHSelector){case 0:case 1:i=L(e.huffmanDHSelector+4);break;case 3:i=D(c,t,n),c++;break;default:throw new a("invalid Huffman DH selector")}switch(e.huffmanDWSelector){case 0:case 1:s=L(e.huffmanDWSelector+2);break;case 3:s=D(c,t,n),c++;break;default:throw new a("invalid Huffman DW selector")}return e.bitmapSizeSelector?(r=D(c,t,n),c++):r=L(1),o=e.aggregationInstancesSelector?D(c,t,n):L(1),{tableDeltaHeight:i,tableDeltaWidth:s,tableBitmapSize:r,tableAggregateInstances:o}}(e,n,this.customTables),d=new _(i,r,o));let f=this.symbols;f||(this.symbols=f={});let p=[];for(let e=0,t=n.length;e<t;e++){const t=f[n[e]];t&&(p=p.concat(t))}const g=new l(i,r,o);f[t]=function(e,t,n,i,r,o,c,l,d,f,p,g){if(e&&t)throw new a("symbol refinement with Huffman is not supported");const m=[];let w=0,C=(0,s.log2)(n.length+i);const T=p.decoder,P=p.contextCache;let S,I;for(e&&(S=L(1),I=[],C=Math.max(C,1));m.length<i;){w+=e?o.tableDeltaHeight.decode(g):h(P,"IADH",T);let i=0,s=0;const r=e?I.length:0;for(;;){const r=e?o.tableDeltaWidth.decode(g):h(P,"IADW",T);if(null===r)break;let a;if(i+=r,s+=i,t){const s=h(P,"IAAI",T);if(s>1)a=x(e,t,i,w,0,s,1,n.concat(m),C,0,0,1,0,o,d,f,p,0,g);else{const e=u(P,T,C),t=h(P,"IARDX",T),s=h(P,"IARDY",T);a=y(i,w,d,e<n.length?n[e]:m[e-n.length],t,s,!1,f,p)}m.push(a)}else e?I.push(i):(a=b(!1,i,w,c,!1,null,l,p),m.push(a))}if(e&&!t){const e=o.tableBitmapSize.decode(g);let t;if(g.byteAlign(),0===e)t=B(g,s,w);else{const n=g.end,i=g.position+e;g.end=i,t=M(g,s,w,!1),g.end=n,g.position=i}const n=I.length;if(r===n-1)m.push(t);else{let e,i,s,o,a,c=0;for(e=r;e<n;e++){for(o=I[e],s=c+o,a=[],i=0;i<w;i++)a.push(t[i].subarray(c,s));m.push(a),c=s}}}}const k=[],A=[];let E,O,v=!1;const _=n.length+i;for(;A.length<_;){let t=e?S.decode(g):h(P,"IAEX",T);for(;t--;)A.push(v);v=!v}for(E=0,O=n.length;E<O;E++)A[E]&&k.push(n[E]);for(let e=0;e<i;E++,e++)A[E]&&k.push(m[e]);return k}(e.huffman,e.refinement,p,e.numberOfNewSymbols,e.numberOfExportedSymbols,c,e.template,e.at,e.refinementTemplate,e.refinementAt,g,d)}onImmediateTextRegion(e,t,n,i,r){const o=e.info;let c,h;const u=this.symbols;let d=[];for(let e=0,n=t.length;e<n;e++){const n=u[t[e]];n&&(d=d.concat(n))}const f=(0,s.log2)(d.length);e.huffman&&(h=new _(n,i,r),c=function(e,t,n,i,s){const r=[];for(let e=0;e<=34;e++){const t=s.readBits(4);r.push(new A([e,t,0,0]))}const o=new O(r,!1);r.length=0;for(let e=0;e<i;){const t=o.decode(s);if(t>=32){let n,i,o;switch(t){case 32:if(0===e)throw new a("no previous value in symbol ID table");i=s.readBits(2)+3,n=r[e-1].prefixLength;break;case 33:i=s.readBits(3)+3,n=0;break;case 34:i=s.readBits(7)+11,n=0;break;default:throw new a("invalid code length in symbol ID table")}for(o=0;o<i;o++)r.push(new A([e,n,0,0])),e++}else r.push(new A([e,t,0,0])),e++}s.byteAlign();const c=new O(r,!1);let l,h,u,d=0;switch(e.huffmanFS){case 0:case 1:l=L(e.huffmanFS+6);break;case 3:l=D(d,t,n),d++;break;default:throw new a("invalid Huffman FS selector")}switch(e.huffmanDS){case 0:case 1:case 2:h=L(e.huffmanDS+8);break;case 3:h=D(d,t,n),d++;break;default:throw new a("invalid Huffman DS selector")}switch(e.huffmanDT){case 0:case 1:case 2:u=L(e.huffmanDT+11);break;case 3:u=D(d,t,n),d++;break;default:throw new a("invalid Huffman DT selector")}if(e.refinement)throw new a("refinement with Huffman is not supported");return{symbolIDTable:c,tableFirstS:l,tableDeltaS:h,tableDeltaT:u}}(e,t,this.customTables,d.length,h));const p=new l(n,i,r),g=x(e.huffman,e.refinement,o.width,o.height,e.defaultPixelValue,e.numberOfSymbolInstances,e.stripSize,d,f,e.transposed,e.dsOffset,e.referenceCorner,e.combinationOperator,c,e.refinementTemplate,e.refinementAt,p,e.logStripSize,h);this.drawBitmap(o,g)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,arguments)}onPatternDictionary(e,t,n,i,s){let r=this.patterns;r||(this.patterns=r={});const o=new l(n,i,s);r[t]=function(e,t,n,i,s,r){const o=[];e||(o.push({x:-t,y:0}),0===s&&o.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const a=b(e,(i+1)*t,n,s,!1,null,o,r),c=[];for(let e=0;e<=i;e++){const i=[],s=t*e,r=s+t;for(let e=0;e<n;e++)i.push(a[e].subarray(s,r));c.push(i)}return c}(e.mmr,e.patternWidth,e.patternHeight,e.maxPatternIndex,e.template,o)}onImmediateHalftoneRegion(e,t,n,i,r){const o=this.patterns[t[0]],c=e.info,h=new l(n,i,r),u=function(e,t,n,i,r,o,c,l,h,u,d,f,p,g,m){if(c)throw new a("skip is not supported");if(0!==l)throw new a(`operator "${l}" is not supported in halftone region`);const y=[];let x,w,C;for(x=0;x<r;x++){if(C=new Uint8Array(i),o)for(w=0;w<i;w++)C[w]=o;y.push(C)}const T=t.length,P=t[0],S=P[0].length,I=P.length,k=(0,s.log2)(T),A=[];e||(A.push({x:n<=1?3:2,y:-1}),0===n&&A.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const E=[];let O,v,L,D,B,R,F,U,N,z,X;for(e&&(O=new _(m.data,m.start,m.end)),x=k-1;x>=0;x--)v=e?M(O,h,u,!0):b(!1,h,u,n,!1,null,A,m),E[x]=v;for(L=0;L<u;L++)for(D=0;D<h;D++){for(B=0,R=0,w=k-1;w>=0;w--)B^=E[w][L][D],R|=B<<w;if(F=t[R],U=d+L*g+D*p>>8,N=f+L*p-D*g>>8,U>=0&&U+S<=i&&N>=0&&N+I<=r)for(x=0;x<I;x++)for(X=y[N+x],z=F[x],w=0;w<S;w++)X[U+w]|=z[w];else{let e,t;for(x=0;x<I;x++)if(t=N+x,!(t<0||t>=r))for(X=y[t],z=F[x],w=0;w<S;w++)e=U+w,e>=0&&e<i&&(X[e]|=z[w])}}return y}(e.mmr,o,e.template,c.width,c.height,e.defaultPixelValue,e.enableSkip,e.combinationOperator,e.gridWidth,e.gridHeight,e.gridOffsetX,e.gridOffsetY,e.gridVectorX,e.gridVectorY,h);this.drawBitmap(c,u)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)}onTables(e,t,n,i){let r=this.customTables;r||(this.customTables=r={}),r[e]=function(e,t,n){const i=e[t],r=4294967295&(0,s.readUint32)(e,t+1),o=4294967295&(0,s.readUint32)(e,t+5),a=new _(e,t+9,n),c=1+(i>>1&7),l=1+(i>>4&7),h=[];let u,d,f=r;do{u=a.readBits(c),d=a.readBits(l),h.push(new A([f,u,d,0])),f+=1<<d}while(f<o);return u=a.readBits(c),h.push(new A([r-1,u,32,0,"lower"])),u=a.readBits(c),h.push(new A([o,u,32,0])),1&i&&(u=a.readBits(c),h.push(new A([u,0]))),new O(h,!1)}(t,n,i)}}class A{constructor(e){2===e.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=e[0],this.rangeLength=0,this.prefixCode=e[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=e[0],this.prefixLength=e[1],this.rangeLength=e[2],this.prefixCode=e[3],this.isLowerRange="lower"===e[4])}}class E{constructor(e){this.children=[],e?(this.isLeaf=!0,this.rangeLength=e.rangeLength,this.rangeLow=e.rangeLow,this.isLowerRange=e.isLowerRange,this.isOOB=e.isOOB):this.isLeaf=!1}buildTree(e,t){const n=e.prefixCode>>t&1;if(t<=0)this.children[n]=new E(e);else{let i=this.children[n];i||(this.children[n]=i=new E(null)),i.buildTree(e,t-1)}}decodeNode(e){if(this.isLeaf){if(this.isOOB)return null;const t=e.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-t:t)}const t=this.children[e.readBit()];if(!t)throw new a("invalid Huffman data");return t.decodeNode(e)}}class O{constructor(e,t){t||this.assignPrefixCodes(e),this.rootNode=new E(null);for(let t=0,n=e.length;t<n;t++){const n=e[t];n.prefixLength>0&&this.rootNode.buildTree(n,n.prefixLength-1)}}decode(e){return this.rootNode.decodeNode(e)}assignPrefixCodes(e){const t=e.length;let n=0;for(let i=0;i<t;i++)n=Math.max(n,e[i].prefixLength);const i=new Uint32Array(n+1);for(let n=0;n<t;n++)i[e[n].prefixLength]++;let s,r,o,a=1,c=0;for(i[0]=0;a<=n;){for(c=c+i[a-1]<<1,s=c,r=0;r<t;)o=e[r],o.prefixLength===a&&(o.prefixCode=s,s++),r++;a++}}}const v={};function L(e){let t,n=v[e];if(n)return n;switch(e){case 1:t=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:t=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:t=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:t=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:t=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:t=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:t=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:t=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:t=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:t=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:t=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:t=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:t=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:t=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:t=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new a(`standard table B.${e} does not exist`)}for(let e=0,n=t.length;e<n;e++)t[e]=new A(t[e]);return n=new O(t,!0),v[e]=n,n}class _{constructor(e,t,n){this.data=e,this.start=t,this.end=n,this.position=t,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new a("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const e=this.currentByte>>this.shift&1;return this.shift--,e}readBits(e){let t,n=0;for(t=e-1;t>=0;t--)n|=this.readBit()<<t;return n}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function D(e,t,n){let i=0;for(let s=0,r=t.length;s<r;s++){const r=n[t[s]];if(r){if(e===i)return r;i++}}throw new a("can't find custom Huffman table")}function B(e,t,n){const i=[];for(let s=0;s<n;s++){const n=new Uint8Array(t);i.push(n);for(let i=0;i<t;i++)n[i]=e.readBit();e.byteAlign()}return i}function M(e,t,n,i){const s={K:-1,Columns:t,Rows:n,BlackIs1:!0,EndOfBlock:i},r=new o.CCITTFaxDecoder(e,s),a=[];let c,l=!1;for(let e=0;e<n;e++){const e=new Uint8Array(t);a.push(e);let n=-1;for(let i=0;i<t;i++)n<0&&(c=r.readNextChar(),-1===c&&(c=0,l=!0),n=7),e[i]=c>>n&1,n--}if(i&&!l){const e=5;for(let t=0;t<e&&-1!==r.readNextChar();t++);}return a}t.Jbig2Image=class{parseChunks(e){return function(e){const t=new k;for(let n=0,i=e.length;n<i;n++){const i=e[n];I(C({},i.data,i.start,i.end),t)}return t.buffer}(e)}parse(e){const{imgData:t,width:n,height:i}=function(e){const t=e.length;let n=0;if(151!==e[n]||74!==e[n+1]||66!==e[n+2]||50!==e[n+3]||13!==e[n+4]||10!==e[n+5]||26!==e[n+6]||10!==e[n+7])throw new a("parseJbig2 - invalid header.");const i=Object.create(null);n+=8;const r=e[n++];i.randomAccess=!(1&r),2&r||(i.numberOfPages=(0,s.readUint32)(e,n),n+=4);const o=C(i,e,n,t),c=new k;I(o,c);const{width:l,height:h}=c.currentPageInfo,u=c.buffer,d=new Uint8ClampedArray(l*h);let f=0,p=0;for(let e=0;e<h;e++){let e,t=0;for(let n=0;n<l;n++)t||(t=128,e=u[p++]),d[f++]=e&t?0:255,t>>=1}return{imgData:d,width:l,height:h}}(e);return this.width=n,this.height=i,t}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XRefParseException=t.XRefEntryException=t.ParserEOFException=t.MissingDataException=t.DocStats=void 0,t.collectActions=function(e,t,n){const r=Object.create(null),o=l({dict:t,key:"AA",stopWhenFound:!1});if(o)for(let t=o.length-1;t>=0;t--){const i=o[t];if(i instanceof s.Dict)for(const t of i.getKeys()){const o=n[t];if(!o)continue;const a=[];u(i.getRaw(t),e,a,new s.RefSet),a.length>0&&(r[o]=a)}}if(t.has("A")){const n=[];u(t.get("A"),e,n,new s.RefSet),n.length>0&&(r.Action=n)}return(0,i.objectSize)(r)>0?r:null},t.encodeToXmlString=function(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++){const s=e.codePointAt(i);if(32<=s&&s<=126){const r=d[s];r&&(n<i&&t.push(e.substring(n,i)),t.push(r),n=i+1)}else n<i&&t.push(e.substring(n,i)),t.push(`&#x${s.toString(16).toUpperCase()};`),s>55295&&(s<57344||s>65533)&&i++,n=i+1}return 0===t.length?e:(n<e.length&&t.push(e.substring(n,e.length)),t.join(""))},t.escapePDFName=function(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++){const s=e.charCodeAt(i);(s<33||s>126||35===s||40===s||41===s||60===s||62===s||91===s||93===s||123===s||125===s||47===s||37===s)&&(n<i&&t.push(e.substring(n,i)),t.push(`#${s.toString(16)}`),n=i+1)}return 0===t.length?e:(n<e.length&&t.push(e.substring(n,e.length)),t.join(""))},t.getArrayLookupTableFactory=function(e){let t;return function(){if(e){let n=e();e=null,t=Object.create(null);for(let e=0,i=n.length;e<i;e+=2)t[n[e]]=n[e+1];n=null}return t}},t.getInheritableProperty=l,t.getLookupTableFactory=function(e){let t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}},t.isWhiteSpace=function(e){return 32===e||9===e||13===e||10===e},t.log2=function(e){return e<=0?0:Math.ceil(Math.log2(e))},t.parseXFAPath=function(e){const t=/(.+)\[(\d+)\]$/;return e.split(".").map((e=>{const n=e.match(t);return n?{name:n[1],pos:parseInt(n[2],10)}:{name:e,pos:0}}))},t.readInt8=function(e,t){return e[t]<<24>>24},t.readUint16=function(e,t){return e[t]<<8|e[t+1]},t.readUint32=function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0},t.recoverJsURL=function(e){const t=new RegExp("^\\s*("+["app.launchURL","window.open","xfa.host.gotoURL"].join("|").split(".").join("\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec(e);if(t&&t[2]){const e=t[2];let n=!1;return"true"===t[3]&&"app.launchURL"===t[1]&&(n=!0),{url:e,newWindow:n}}return null},t.toRomanNumerals=function(e,t=!1){(0,i.assert)(Number.isInteger(e)&&e>0,"The number should be a positive integer.");const n=[];let s;for(;e>=1e3;)e-=1e3,n.push("M");s=e/100|0,e%=100,n.push(h[s]),s=e/10|0,e%=10,n.push(h[10+s]),n.push(h[20+e]);const r=n.join("");return t?r.toLowerCase():r},t.validateCSSFont=function(e){const t=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:n,fontWeight:s,italicAngle:r}=e;if(/^".*"$/.test(n)){if(/[^\\]"/.test(n.slice(1,n.length-1)))return(0,i.warn)(`XFA - FontFamily contains some unescaped ": ${n}.`),!1}else if(/^'.*'$/.test(n)){if(/[^\\]'/.test(n.slice(1,n.length-1)))return(0,i.warn)(`XFA - FontFamily contains some unescaped ': ${n}.`),!1}else for(const e of n.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(e)||!/^[\w-\\]+$/.test(e))return(0,i.warn)(`XFA - FontFamily contains some invalid <custom-ident>: ${n}.`),!1;const o=s?s.toString():"";e.fontWeight=t.has(o)?o:"400";const a=parseFloat(r);return e.italicAngle=isNaN(a)||a<-90||a>90?"14":r.toString(),!0};var i=n(1),s=n(6);class r extends i.BaseException{constructor(e,t){super(`Missing data [${e}, ${t})`,"MissingDataException"),this.begin=e,this.end=t}}t.MissingDataException=r;class o extends i.BaseException{constructor(e){super(e,"ParserEOFException")}}t.ParserEOFException=o;class a extends i.BaseException{constructor(e){super(e,"XRefEntryException")}}t.XRefEntryException=a;class c extends i.BaseException{constructor(e){super(e,"XRefParseException")}}function l({dict:e,key:t,getArray:n=!1,stopWhenFound:i=!0}){let r;const o=new s.RefSet;for(;e instanceof s.Dict&&(!e.objId||!o.has(e.objId));){e.objId&&o.put(e.objId);const s=n?e.getArray(t):e.get(t);if(void 0!==s){if(i)return s;r||(r=[]),r.push(s)}e=e.get("Parent")}return r}t.XRefParseException=c,t.DocStats=class{constructor(e){this._handler=e,this._streamTypes=new Set,this._fontTypes=new Set}_send(){const e=Object.create(null),t=Object.create(null);for(const t of this._streamTypes)e[t]=!0;for(const e of this._fontTypes)t[e]=!0;this._handler.send("DocStats",{streamTypes:e,fontTypes:t})}addStreamType(e){this._streamTypes.has(e)||(this._streamTypes.add(e),this._send())}addFontType(e){this._fontTypes.has(e)||(this._fontTypes.add(e),this._send())}};const h=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function u(e,t,n,r){if(!e)return;let o=null;if((0,s.isRef)(e)){if(r.has(e))return;o=e,r.put(o),e=t.fetch(e)}if(Array.isArray(e))for(const i of e)u(i,t,n,r);else if(e instanceof s.Dict){if((0,s.isName)(e.get("S"),"JavaScript")&&e.has("JS")){const t=e.get("JS");let r;r=(0,s.isStream)(t)?t.getString():t,r=(0,i.stringToPDFString)(r),r&&n.push(r)}u(e.getRaw("Next"),t,n,r)}o&&r.remove(o)}const d={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefSetCache=t.RefSet=t.Ref=t.Name=t.EOF=t.Dict=t.Cmd=t.CIRCULAR_REF=void 0,t.clearPrimitiveCaches=function(){c._clearCache(),a._clearCache(),u._clearCache()},t.isCmd=function(e,t){return e instanceof c&&(void 0===t||e.cmd===t)},t.isDict=function(e,t){return e instanceof h&&(void 0===t||d(e.get("Type"),t))},t.isName=d,t.isRef=function(e){return e instanceof u},t.isRefsEqual=function(e,t){return e.num===t.num&&e.gen===t.gen},t.isStream=function(e){return e instanceof s.BaseStream};var i=n(1),s=n(7);const r=Symbol("CIRCULAR_REF");t.CIRCULAR_REF=r;const o=Symbol("EOF");t.EOF=o;const a=function(){let e=Object.create(null);class t{constructor(e){this.name=e}static get(n){return e[n]||(e[n]=new t(n))}static _clearCache(){e=Object.create(null)}}return t}();t.Name=a;const c=function(){let e=Object.create(null);class t{constructor(e){this.cmd=e}static get(n){return e[n]||(e[n]=new t(n))}static _clearCache(){e=Object.create(null)}}return t}();t.Cmd=c;const l=function(){return l};class h{constructor(e=null){this._map=Object.create(null),this.xref=e,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=l}assignXref(e){this.xref=e}get size(){return Object.keys(this._map).length}get(e,t,n){let i=this._map[e];return void 0===i&&void 0!==t&&(i=this._map[t],void 0===i&&void 0!==n&&(i=this._map[n])),i instanceof u&&this.xref?this.xref.fetch(i,this.suppressEncryption):i}async getAsync(e,t,n){let i=this._map[e];return void 0===i&&void 0!==t&&(i=this._map[t],void 0===i&&void 0!==n&&(i=this._map[n])),i instanceof u&&this.xref?this.xref.fetchAsync(i,this.suppressEncryption):i}getArray(e,t,n){let i=this._map[e];if(void 0===i&&void 0!==t&&(i=this._map[t],void 0===i&&void 0!==n&&(i=this._map[n])),i instanceof u&&this.xref&&(i=this.xref.fetch(i,this.suppressEncryption)),Array.isArray(i)){i=i.slice();for(let e=0,t=i.length;e<t;e++)i[e]instanceof u&&this.xref&&(i[e]=this.xref.fetch(i[e],this.suppressEncryption))}return i}getRaw(e){return this._map[e]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(e,t){this._map[e]=t}has(e){return void 0!==this._map[e]}forEach(e){for(const t in this._map)e(t,this.get(t))}static get empty(){const e=new h(null);return e.set=(e,t)=>{(0,i.unreachable)("Should not call `set` on the empty dictionary.")},(0,i.shadow)(this,"empty",e)}static merge({xref:e,dictArray:t,mergeSubDicts:n=!1}){const i=new h(e),s=new Map;for(const e of t)if(e instanceof h)for(const[t,i]of Object.entries(e._map)){let e=s.get(t);if(void 0===e)e=[],s.set(t,e);else if(!(n&&i instanceof h))continue;e.push(i)}for(const[t,n]of s){if(1===n.length||!(n[0]instanceof h)){i._map[t]=n[0];continue}const s=new h(e);for(const e of n)for(const[t,n]of Object.entries(e._map))void 0===s._map[t]&&(s._map[t]=n);s.size>0&&(i._map[t]=s)}return s.clear(),i.size>0?i:h.empty}}t.Dict=h;const u=function(){let e=Object.create(null);class t{constructor(e,t){this.num=e,this.gen=t}toString(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}static get(n,i){const s=0===i?`${n}R`:`${n}R${i}`;return e[s]||(e[s]=new t(n,i))}static _clearCache(){e=Object.create(null)}}return t}();function d(e,t){return e instanceof a&&(void 0===t||e.name===t)}t.Ref=u,t.RefSet=class{constructor(e=null){this._set=new Set(e&&e._set)}has(e){return this._set.has(e.toString())}put(e){this._set.add(e.toString())}remove(e){this._set.delete(e.toString())}forEach(e){for(const t of this._set.values())e(t)}clear(){this._set.clear()}},t.RefSetCache=class{constructor(){this._map=new Map}get size(){return this._map.size}get(e){return this._map.get(e.toString())}has(e){return this._map.has(e.toString())}put(e,t){this._map.set(e.toString(),t)}putAlias(e,t){this._map.set(e.toString(),this.get(t))}forEach(e){for(const t of this._map.values())e(t)}clear(){this._map.clear()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStream=void 0;var i=n(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseStream.")}get length(){(0,i.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,i.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,i.shadow)(this,"isDataLoaded",!0)}getByte(){(0,i.unreachable)("Abstract method `getByte` called")}getBytes(e,t=!1){(0,i.unreachable)("Abstract method `getBytes` called")}peekByte(){const e=this.getByte();return-1!==e&&this.pos--,e}peekBytes(e,t=!1){const n=this.getBytes(e,t);return this.pos-=n.length,n}getUint16(){const e=this.getByte(),t=this.getByte();return-1===e||-1===t?-1:(e<<8)+t}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getByteRange(e,t){(0,i.unreachable)("Abstract method `getByteRange` called")}getString(e){return(0,i.bytesToString)(this.getBytes(e,!1))}skip(e){this.pos+=e||1}reset(){(0,i.unreachable)("Abstract method `reset` called")}moveStart(){(0,i.unreachable)("Abstract method `moveStart` called")}makeSubStream(e,t,n=null){(0,i.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}t.BaseStream=s},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArithmeticDecoder=void 0;const n=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];t.ArithmeticDecoder=class{constructor(e,t,n){this.data=e,this.bp=t,this.dataEnd=n,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const e=this.data;let t=this.bp;255===e[t]?e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(e,t){let i=e[t]>>1,s=1&e[t];const r=n[i],o=r.qe;let a,c=this.a-o;if(this.chigh<o)c<o?(c=o,a=s,i=r.nmps):(c=o,a=1^s,1===r.switchFlag&&(s=a),i=r.nlps);else{if(this.chigh-=o,0!=(32768&c))return this.a=c,s;c<o?(a=1^s,1===r.switchFlag&&(s=a),i=r.nlps):(a=s,i=r.nmps)}do{0===this.ct&&this.byteIn(),c<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&c));return this.a=c,e[t]=i<<1|s,a}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CCITTFaxDecoder=void 0;var i=n(1);const s=-1,r=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],o=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],a=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],c=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],l=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],h=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];t.CCITTFaxDecoder=class{constructor(e,t={}){if(!e||"function"!=typeof e.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=e,this.eof=!1,this.encoding=t.K||0,this.eoline=t.EndOfLine||!1,this.byteAlign=t.EncodedByteAlign||!1,this.columns=t.Columns||1728,this.rows=t.Rows||0;let n,i=t.EndOfBlock;for(null==i&&(i=!0),this.eoblock=i,this.black=t.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(n=this._lookBits(12));)this._eatBits(1);1===n&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const e=this.refLine,t=this.codingLine,n=this.columns;let r,o,a,c,l;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let a,l,h;if(this.err=!1,this.nextLine2D){for(c=0;t[c]<n;++c)e[c]=t[c];for(e[c++]=n,e[c]=n,t[0]=0,this.codingPos=0,r=0,o=0;t[this.codingPos]<n;)switch(a=this._getTwoDimCode(),a){case 0:this._addPixels(e[r+1],o),e[r+1]<n&&(r+=2);break;case 1:if(a=l=0,o){do{a+=h=this._getBlackCode()}while(h>=64);do{l+=h=this._getWhiteCode()}while(h>=64)}else{do{a+=h=this._getWhiteCode()}while(h>=64);do{l+=h=this._getBlackCode()}while(h>=64)}for(this._addPixels(t[this.codingPos]+a,o),t[this.codingPos]<n&&this._addPixels(t[this.codingPos]+l,1^o);e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 7:if(this._addPixels(e[r]+3,o),o^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 5:if(this._addPixels(e[r]+2,o),o^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 3:if(this._addPixels(e[r]+1,o),o^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 2:if(this._addPixels(e[r],o),o^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 8:if(this._addPixelsNeg(e[r]-3,o),o^=1,t[this.codingPos]<n)for(r>0?--r:++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 6:if(this._addPixelsNeg(e[r]-2,o),o^=1,t[this.codingPos]<n)for(r>0?--r:++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 4:if(this._addPixelsNeg(e[r]-1,o),o^=1,t[this.codingPos]<n)for(r>0?--r:++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case s:this._addPixels(n,0),this.eof=!0;break;default:(0,i.info)("bad 2d code"),this._addPixels(n,0),this.err=!0}}else for(t[0]=0,this.codingPos=0,o=0;t[this.codingPos]<n;){if(a=0,o)do{a+=h=this._getBlackCode()}while(h>=64);else do{a+=h=this._getWhiteCode()}while(h>=64);this._addPixels(t[this.codingPos]+a,o),o^=1}let u=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(a=this._lookBits(12),this.eoline)for(;a!==s&&1!==a;)this._eatBits(1),a=this._lookBits(12);else for(;0===a;)this._eatBits(1),a=this._lookBits(12);1===a?(this._eatBits(12),u=!0):a===s&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&u&&this.byteAlign){if(a=this._lookBits(12),1===a){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(c=0;c<4;++c)a=this._lookBits(12),1!==a&&(0,i.info)("bad rtc code: "+a),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(a=this._lookBits(13),a===s)return this.eof=!0,-1;if(a>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&a))}t[0]>0?this.outputBits=t[this.codingPos=0]:this.outputBits=t[this.codingPos=1],this.row++}if(this.outputBits>=8)l=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&t[this.codingPos]<n&&(this.codingPos++,this.outputBits=t[this.codingPos]-t[this.codingPos-1]);else{a=8,l=0;do{if("number"!=typeof this.outputBits)throw new i.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>a?(l<<=a,1&this.codingPos||(l|=255>>8-a),this.outputBits-=a,a=0):(l<<=this.outputBits,1&this.codingPos||(l|=255>>8-this.outputBits),a-=this.outputBits,this.outputBits=0,t[this.codingPos]<n?(this.codingPos++,this.outputBits=t[this.codingPos]-t[this.codingPos-1]):a>0&&(l<<=a,a=0))}while(a)}return this.black&&(l^=255),l}_addPixels(e,t){const n=this.codingLine;let s=this.codingPos;e>n[s]&&(e>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,e=this.columns),1&s^t&&++s,n[s]=e),this.codingPos=s}_addPixelsNeg(e,t){const n=this.codingLine;let s=this.codingPos;if(e>n[s])e>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,e=this.columns),1&s^t&&++s,n[s]=e;else if(e<n[s]){for(e<0&&((0,i.info)("invalid code"),this.err=!0,e=0);s>0&&e<n[s-1];)--s;n[s]=e}this.codingPos=s}_findTableCode(e,t,n,i){const r=i||0;for(let i=e;i<=t;++i){let e=this._lookBits(i);if(e===s)return[!0,1,!1];if(i<t&&(e<<=t-i),!r||e>=r){const t=n[e-r];if(t[0]===i)return this._eatBits(i),[!0,t[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let e,t=0;if(this.eoblock){if(t=this._lookBits(7),e=r[t],e&&e[0]>0)return this._eatBits(e[0]),e[1]}else{const e=this._findTableCode(1,7,r);if(e[0]&&e[2])return e[1]}return(0,i.info)("Bad two dim code"),s}_getWhiteCode(){let e,t=0;if(this.eoblock){if(t=this._lookBits(12),t===s)return 1;if(e=t>>5==0?o[t]:a[t>>3],e[0]>0)return this._eatBits(e[0]),e[1]}else{let e=this._findTableCode(1,9,a);if(e[0])return e[1];if(e=this._findTableCode(11,12,o),e[0])return e[1]}return(0,i.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let e,t;if(this.eoblock){if(e=this._lookBits(13),e===s)return 1;if(t=e>>7==0?c[e]:e>>9==0&&e>>7!=0?l[(e>>1)-64]:h[e>>7],t[0]>0)return this._eatBits(t[0]),t[1]}else{let e=this._findTableCode(2,6,h);if(e[0])return e[1];if(e=this._findTableCode(7,12,l,64),e[0])return e[1];if(e=this._findTableCode(10,13,c),e[0])return e[1]}return(0,i.info)("bad black code"),this._eatBits(1),1}_lookBits(e){let t;for(;this.inputBits<e;){if(-1===(t=this.source.next()))return 0===this.inputBits?s:this.inputBuf<<e-this.inputBits&65535>>16-e;this.inputBuf=this.inputBuf<<8|t,this.inputBits+=8}return this.inputBuf>>this.inputBits-e&65535>>16-e}_eatBits(e){(this.inputBits-=e)<0&&(this.inputBits=0)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JpegImage=void 0;var i=n(1),s=n(5);class r extends i.BaseException{constructor(e){super(`JPEG error: ${e}`,"JpegError")}}class o extends i.BaseException{constructor(e,t){super(e,"DNLMarkerError"),this.scanLines=t}}class a extends i.BaseException{constructor(e){super(e,"EOIMarkerError")}}const c=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=4017,h=799,u=3406,d=2276,f=1567,p=3784,g=5793,m=2896;function b(e,t){let n,i,s=0,r=16;for(;r>0&&!e[r-1];)r--;const o=[{children:[],index:0}];let a,c=o[0];for(n=0;n<r;n++){for(i=0;i<e[n];i++){for(c=o.pop(),c.children[c.index]=t[s];c.index>0;)c=o.pop();for(c.index++,o.push(c);o.length<=n;)o.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a;s++}n+1<r&&(o.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a)}return o[0].children}function y(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function x(e,t,n,l,h,u,d,f,p,g=!1){const m=n.mcusPerLine,b=n.progressive,x=t;let w=0,C=0;function P(){if(C>0)return C--,w>>C&1;if(w=e[t++],255===w){const i=e[t++];if(i){if(220===i&&g){t+=2;const i=(0,s.readUint16)(e,t);if(t+=2,i>0&&i!==n.scanLines)throw new o("Found DNL marker (0xFFDC) while parsing scan data",i)}else if(217===i){if(g){const e=v*(8===n.precision?8:0);if(e>0&&Math.round(n.scanLines/e)>=10)throw new o("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",e)}throw new a("Found EOI marker (0xFFD9) while parsing scan data")}throw new r(`unexpected marker ${(w<<8|i).toString(16)}`)}}return C=7,w>>>7}function S(e){let t=e;for(;;){switch(t=t[P()],typeof t){case"number":return t;case"object":continue}throw new r("invalid huffman sequence")}}function I(e){let t=0;for(;e>0;)t=t<<1|P(),e--;return t}function k(e){if(1===e)return 1===P()?1:-1;const t=I(e);return t>=1<<e-1?t:t+(-1<<e)+1}let A,E=0,O=0,v=0;function L(e,t,n,i,s){const r=n%m;v=(n/m|0)*e.v+i;const o=r*e.h+s;t(e,y(e,v,o))}function _(e,t,n){v=n/e.blocksPerLine|0;const i=n%e.blocksPerLine;t(e,y(e,v,i))}const D=l.length;let B,M,R,F,U,N;N=b?0===u?0===f?function(e,t){const n=S(e.huffmanTableDC),i=0===n?0:k(n)<<p;e.blockData[t]=e.pred+=i}:function(e,t){e.blockData[t]|=P()<<p}:0===f?function(e,t){if(E>0)return void E--;let n=u;const i=d;for(;n<=i;){const i=S(e.huffmanTableAC),s=15&i,r=i>>4;if(0===s){if(r<15){E=I(r)+(1<<r)-1;break}n+=16;continue}n+=r;const o=c[n];e.blockData[t+o]=k(s)*(1<<p),n++}}:function(e,t){let n=u;const i=d;let s,o,a=0;for(;n<=i;){const i=t+c[n],l=e.blockData[i]<0?-1:1;switch(O){case 0:if(o=S(e.huffmanTableAC),s=15&o,a=o>>4,0===s)a<15?(E=I(a)+(1<<a),O=4):(a=16,O=1);else{if(1!==s)throw new r("invalid ACn encoding");A=k(s),O=a?2:3}continue;case 1:case 2:e.blockData[i]?e.blockData[i]+=l*(P()<<p):(a--,0===a&&(O=2===O?3:0));break;case 3:e.blockData[i]?e.blockData[i]+=l*(P()<<p):(e.blockData[i]=A<<p,O=0);break;case 4:e.blockData[i]&&(e.blockData[i]+=l*(P()<<p))}n++}4===O&&(E--,0===E&&(O=0))}:function(e,t){const n=S(e.huffmanTableDC),i=0===n?0:k(n);e.blockData[t]=e.pred+=i;let s=1;for(;s<64;){const n=S(e.huffmanTableAC),i=15&n,r=n>>4;if(0===i){if(r<15)break;s+=16;continue}s+=r;const o=c[s];e.blockData[t+o]=k(i),s++}};let z,X,j,H,Y=0;for(X=1===D?l[0].blocksPerLine*l[0].blocksPerColumn:m*n.mcusPerColumn;Y<=X;){const n=h?Math.min(X-Y,h):X;if(n>0){for(M=0;M<D;M++)l[M].pred=0;if(E=0,1===D)for(B=l[0],U=0;U<n;U++)_(B,N,Y),Y++;else for(U=0;U<n;U++){for(M=0;M<D;M++)for(B=l[M],j=B.h,H=B.v,R=0;R<H;R++)for(F=0;F<j;F++)L(B,N,Y,R,F);Y++}}if(C=0,z=T(e,t),!z)break;if(z.invalid){const e=n>0?"unexpected":"excessive";(0,i.warn)(`decodeScan - ${e} MCU data, current marker is: ${z.invalid}`),t=z.offset}if(!(z.marker>=65488&&z.marker<=65495))break;t+=2}return t-x}function w(e,t,n){const i=e.quantizationTable,s=e.blockData;let o,a,c,b,y,x,w,C,T,P,S,I,k,A,E,O,v;if(!i)throw new r("missing required Quantization Table.");for(let e=0;e<64;e+=8)T=s[t+e],P=s[t+e+1],S=s[t+e+2],I=s[t+e+3],k=s[t+e+4],A=s[t+e+5],E=s[t+e+6],O=s[t+e+7],T*=i[e],0!=(P|S|I|k|A|E|O)?(P*=i[e+1],S*=i[e+2],I*=i[e+3],k*=i[e+4],A*=i[e+5],E*=i[e+6],O*=i[e+7],o=g*T+128>>8,a=g*k+128>>8,c=S,b=E,y=m*(P-O)+128>>8,C=m*(P+O)+128>>8,x=I<<4,w=A<<4,o=o+a+1>>1,a=o-a,v=c*p+b*f+128>>8,c=c*f-b*p+128>>8,b=v,y=y+w+1>>1,w=y-w,C=C+x+1>>1,x=C-x,o=o+b+1>>1,b=o-b,a=a+c+1>>1,c=a-c,v=y*d+C*u+2048>>12,y=y*u-C*d+2048>>12,C=v,v=x*h+w*l+2048>>12,x=x*l-w*h+2048>>12,w=v,n[e]=o+C,n[e+7]=o-C,n[e+1]=a+w,n[e+6]=a-w,n[e+2]=c+x,n[e+5]=c-x,n[e+3]=b+y,n[e+4]=b-y):(v=g*T+512>>10,n[e]=v,n[e+1]=v,n[e+2]=v,n[e+3]=v,n[e+4]=v,n[e+5]=v,n[e+6]=v,n[e+7]=v);for(let e=0;e<8;++e)T=n[e],P=n[e+8],S=n[e+16],I=n[e+24],k=n[e+32],A=n[e+40],E=n[e+48],O=n[e+56],0!=(P|S|I|k|A|E|O)?(o=g*T+2048>>12,a=g*k+2048>>12,c=S,b=E,y=m*(P-O)+2048>>12,C=m*(P+O)+2048>>12,x=I,w=A,o=4112+(o+a+1>>1),a=o-a,v=c*p+b*f+2048>>12,c=c*f-b*p+2048>>12,b=v,y=y+w+1>>1,w=y-w,C=C+x+1>>1,x=C-x,o=o+b+1>>1,b=o-b,a=a+c+1>>1,c=a-c,v=y*d+C*u+2048>>12,y=y*u-C*d+2048>>12,C=v,v=x*h+w*l+2048>>12,x=x*l-w*h+2048>>12,w=v,T=o+C,O=o-C,P=a+w,E=a-w,S=c+x,A=c-x,I=b+y,k=b-y,T<16?T=0:T>=4080?T=255:T>>=4,P<16?P=0:P>=4080?P=255:P>>=4,S<16?S=0:S>=4080?S=255:S>>=4,I<16?I=0:I>=4080?I=255:I>>=4,k<16?k=0:k>=4080?k=255:k>>=4,A<16?A=0:A>=4080?A=255:A>>=4,E<16?E=0:E>=4080?E=255:E>>=4,O<16?O=0:O>=4080?O=255:O>>=4,s[t+e]=T,s[t+e+8]=P,s[t+e+16]=S,s[t+e+24]=I,s[t+e+32]=k,s[t+e+40]=A,s[t+e+48]=E,s[t+e+56]=O):(v=g*T+8192>>14,v=v<-2040?0:v>=2024?255:v+2056>>4,s[t+e]=v,s[t+e+8]=v,s[t+e+16]=v,s[t+e+24]=v,s[t+e+32]=v,s[t+e+40]=v,s[t+e+48]=v,s[t+e+56]=v)}function C(e,t){const n=t.blocksPerLine,i=t.blocksPerColumn,s=new Int16Array(64);for(let e=0;e<i;e++)for(let i=0;i<n;i++)w(t,y(t,e,i),s);return t.blockData}function T(e,t,n=t){const i=e.length-1;let r=n<t?n:t;if(t>=i)return null;const o=(0,s.readUint16)(e,t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};let a=(0,s.readUint16)(e,r);for(;!(a>=65472&&a<=65534);){if(++r>=i)return null;a=(0,s.readUint16)(e,r)}return{invalid:o.toString(16),marker:a,offset:r}}t.JpegImage=class{constructor({decodeTransform:e=null,colorTransform:t=-1}={}){this._decodeTransform=e,this._colorTransform=t}parse(e,{dnlScanLines:t=null}={}){function n(){const t=(0,s.readUint16)(e,d);d+=2;let n=d+t-2;const r=T(e,n,d);r&&r.invalid&&((0,i.warn)("readDataBlock - incorrect length, current marker is: "+r.invalid),n=r.offset);const o=e.subarray(d,n);return d+=o.length,o}function l(e){const t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV);for(let i=0,s=e.components.length;i<s;i++){const s=e.components[i],r=Math.ceil(Math.ceil(e.samplesPerLine/8)*s.h/e.maxH),o=Math.ceil(Math.ceil(e.scanLines/8)*s.v/e.maxV),a=t*s.h,c=n*s.v*64*(a+1);s.blockData=new Int16Array(c),s.blocksPerLine=r,s.blocksPerColumn=o}e.mcusPerLine=t,e.mcusPerColumn=n}let h,u,d=0,f=null,p=null,g=0;const m=[],y=[],w=[];let P=(0,s.readUint16)(e,d);if(d+=2,65496!==P)throw new r("SOI not found");P=(0,s.readUint16)(e,d),d+=2;e:for(;65497!==P;){let C,S,I;switch(P){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const k=n();65504===P&&74===k[0]&&70===k[1]&&73===k[2]&&70===k[3]&&0===k[4]&&(f={version:{major:k[5],minor:k[6]},densityUnits:k[7],xDensity:k[8]<<8|k[9],yDensity:k[10]<<8|k[11],thumbWidth:k[12],thumbHeight:k[13],thumbData:k.subarray(14,14+3*k[12]*k[13])}),65518===P&&65===k[0]&&100===k[1]&&111===k[2]&&98===k[3]&&101===k[4]&&(p={version:k[5]<<8|k[6],flags0:k[7]<<8|k[8],flags1:k[9]<<8|k[10],transformCode:k[11]});break;case 65499:const A=(0,s.readUint16)(e,d);d+=2;const E=A+d-2;let O;for(;d<E;){const t=e[d++],n=new Uint16Array(64);if(t>>4==0)for(S=0;S<64;S++)O=c[S],n[O]=e[d++];else{if(t>>4!=1)throw new r("DQT - invalid table spec");for(S=0;S<64;S++)O=c[S],n[O]=(0,s.readUint16)(e,d),d+=2}m[15&t]=n}break;case 65472:case 65473:case 65474:if(h)throw new r("Only single frame JPEGs supported");d+=2,h={},h.extended=65473===P,h.progressive=65474===P,h.precision=e[d++];const v=(0,s.readUint16)(e,d);d+=2,h.scanLines=t||v,h.samplesPerLine=(0,s.readUint16)(e,d),d+=2,h.components=[],h.componentIds={};const L=e[d++];let _=0,D=0;for(C=0;C<L;C++){const t=e[d],n=e[d+1]>>4,i=15&e[d+1];_<n&&(_=n),D<i&&(D=i);const s=e[d+2];I=h.components.push({h:n,v:i,quantizationId:s,quantizationTable:null}),h.componentIds[t]=I-1,d+=3}h.maxH=_,h.maxV=D,l(h);break;case 65476:const B=(0,s.readUint16)(e,d);for(d+=2,C=2;C<B;){const t=e[d++],n=new Uint8Array(16);let i=0;for(S=0;S<16;S++,d++)i+=n[S]=e[d];const s=new Uint8Array(i);for(S=0;S<i;S++,d++)s[S]=e[d];C+=17+i,(t>>4==0?w:y)[15&t]=b(n,s)}break;case 65501:d+=2,u=(0,s.readUint16)(e,d),d+=2;break;case 65498:const M=1==++g&&!t;d+=2;const R=e[d++],F=[];for(C=0;C<R;C++){const t=e[d++],n=h.componentIds[t],i=h.components[n];i.index=t;const s=e[d++];i.huffmanTableDC=w[s>>4],i.huffmanTableAC=y[15&s],F.push(i)}const U=e[d++],N=e[d++],z=e[d++];try{const t=x(e,d,h,F,u,U,N,z>>4,15&z,M);d+=t}catch(t){if(t instanceof o)return(0,i.warn)(`${t.message} -- attempting to re-parse the JPEG image.`),this.parse(e,{dnlScanLines:t.scanLines});if(t instanceof a){(0,i.warn)(`${t.message} -- ignoring the rest of the image data.`);break e}throw t}break;case 65500:d+=4;break;case 65535:255!==e[d]&&d--;break;default:const X=T(e,d-2,d-3);if(X&&X.invalid){(0,i.warn)("JpegImage.parse - unexpected data, current marker is: "+X.invalid),d=X.offset;break}if(!X||d>=e.length-1){(0,i.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new r("JpegImage.parse - unknown marker: "+P.toString(16))}P=(0,s.readUint16)(e,d),d+=2}this.width=h.samplesPerLine,this.height=h.scanLines,this.jfif=f,this.adobe=p,this.components=[];for(let e=0,t=h.components.length;e<t;e++){const t=h.components[e],n=m[t.quantizationId];n&&(t.quantizationTable=n),this.components.push({index:t.index,output:C(0,t),scaleX:t.h/h.maxH,scaleY:t.v/h.maxV,blocksPerLine:t.blocksPerLine,blocksPerColumn:t.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(e,t,n=!1){const i=this.width/e,s=this.height/t;let r,o,a,c,l,h,u,d,f,p,g,m=0;const b=this.components.length,y=e*t*b,x=new Uint8ClampedArray(y),w=new Uint32Array(e),C=4294967288;let T;for(u=0;u<b;u++){if(r=this.components[u],o=r.scaleX*i,a=r.scaleY*s,m=u,g=r.output,c=r.blocksPerLine+1<<3,o!==T){for(l=0;l<e;l++)d=0|l*o,w[l]=(d&C)<<3|7&d;T=o}for(h=0;h<t;h++)for(d=0|h*a,p=c*(d&C)|(7&d)<<3,l=0;l<e;l++)x[m]=g[p+w[l]],m+=b}let P=this._decodeTransform;if(n||4!==b||P||(P=new Int32Array([-256,255,-256,255,-256,255,-256,255])),P)for(u=0;u<y;)for(d=0,f=0;d<b;d++,u++,f+=2)x[u]=(x[u]*P[f]>>8)+P[f+1];return x}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform}_convertYccToRgb(e){let t,n,i;for(let s=0,r=e.length;s<r;s+=3)t=e[s],n=e[s+1],i=e[s+2],e[s]=t-179.456+1.402*i,e[s+1]=t+135.459-.344*n-.714*i,e[s+2]=t-226.816+1.772*n;return e}_convertYcckToRgb(e){let t,n,i,s,r=0;for(let o=0,a=e.length;o<a;o+=4)t=e[o],n=e[o+1],i=e[o+2],s=e[o+3],e[r++]=n*(-660635669420364e-19*n+.000437130475926232*i-54080610064599e-18*t+.00048449797120281*s-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*t-.00477271405408747*s+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*s+.48357088451265)+s*(-.000336197177618394*s+.484791561490776),e[r++]=107.268039397724+n*(219927104525741e-19*n-.000640992018297945*i+.000659397001245577*t+.000426105652938837*s-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*t+.000770482631801132*s-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*s+.25802910206845)+s*(-.000318913117588328*s-.213742400323665),e[r++]=n*(-.000570115196973677*n-263409051004589e-19*i+.0020741088115012*t-.00288260236853442*s+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*t+.000560833691242812*s-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*s+.116935020465145)+s*(-.000343531996510555*s+.24165260232407);return e.subarray(0,r)}_convertYcckToCmyk(e){let t,n,i;for(let s=0,r=e.length;s<r;s+=4)t=e[s],n=e[s+1],i=e[s+2],e[s]=434.456-t-1.402*i,e[s+1]=119.541-t+.344*n+.714*i,e[s+2]=481.816-t-1.772*n;return e}_convertCmykToRgb(e){let t,n,i,s,r=0;for(let o=0,a=e.length;o<a;o+=4)t=e[o],n=e[o+1],i=e[o+2],s=e[o+3],e[r++]=255+t*(-6747147073602441e-20*t+.0008379262121013727*n+.0002894718188643294*i+.003264231057537806*s-1.1185611867203937)+n*(26374107616089405e-21*n-8626949158638572e-20*i-.0002748769067499491*s-.02155688794978967)+i*(-3878099212869363e-20*i-.0003267808279485286*s+.0686742238595345)-s*(.0003361971776183937*s+.7430659151342254),e[r++]=255+t*(.00013596372813588848*t+.000924537132573585*n+.00010567359618683593*i+.0004791864687436512*s-.3109689587515875)+n*(-.00023545346108370344*n+.0002702845253534714*i+.0020200308977307156*s-.7488052167015494)+i*(6834815998235662e-20*i+.00015168452363460973*s-.09751927774728933)-s*(.0003189131175883281*s+.7364883807733168),e[r++]=255+t*(13598650411385307e-21*t+.00012423956175490851*n+.0004751985097583589*i-36729317476630422e-22*s-.05562186980264034)+n*(.00016141380598724676*n+.0009692239130725186*i+.0007782692450036253*s-.44015232367526463)+i*(5.068882914068769e-7*i+.0017778369011375071*s-.7591454649749609)-s*(.0003435319965105553*s+.7063770186160144);return e.subarray(0,r)}getData({width:e,height:t,forceRGB:n=!1,isSourcePDF:i=!1}){if(this.numComponents>4)throw new r("Unsupported color mode");const s=this._getLinearizedBlockData(e,t,i);if(1===this.numComponents&&n){const e=s.length,t=new Uint8ClampedArray(3*e);let n=0;for(let i=0;i<e;i++){const e=s[i];t[n++]=e,t[n++]=e,t[n++]=e}return t}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(s);if(4===this.numComponents){if(this._isColorConversionNeeded)return n?this._convertYcckToRgb(s):this._convertYcckToCmyk(s);if(n)return this._convertCmykToRgb(s)}return s}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JpxImage=void 0;var i=n(1),s=n(5),r=n(8);class o extends i.BaseException{constructor(e){super(`JPX error: ${e}`,"JpxError")}}const a={LL:0,LH:1,HL:1,HH:2};function c(e,t){e.x0=Math.ceil(t.XOsiz/e.XRsiz),e.x1=Math.ceil(t.Xsiz/e.XRsiz),e.y0=Math.ceil(t.YOsiz/e.YRsiz),e.y1=Math.ceil(t.Ysiz/e.YRsiz),e.width=e.x1-e.x0,e.height=e.y1-e.y0}function l(e,t){const n=e.SIZ,i=[];let s;const r=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),o=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz);for(let e=0;e<o;e++)for(let t=0;t<r;t++)s={},s.tx0=Math.max(n.XTOsiz+t*n.XTsiz,n.XOsiz),s.ty0=Math.max(n.YTOsiz+e*n.YTsiz,n.YOsiz),s.tx1=Math.min(n.XTOsiz+(t+1)*n.XTsiz,n.Xsiz),s.ty1=Math.min(n.YTOsiz+(e+1)*n.YTsiz,n.Ysiz),s.width=s.tx1-s.tx0,s.height=s.ty1-s.ty0,s.components=[],i.push(s);e.tiles=i;for(let e=0,r=n.Csiz;e<r;e++){const n=t[e];for(let t=0,r=i.length;t<r;t++){const r={};s=i[t],r.tcx0=Math.ceil(s.tx0/n.XRsiz),r.tcy0=Math.ceil(s.ty0/n.YRsiz),r.tcx1=Math.ceil(s.tx1/n.XRsiz),r.tcy1=Math.ceil(s.ty1/n.YRsiz),r.width=r.tcx1-r.tcx0,r.height=r.tcy1-r.tcy0,s.components[e]=r}}}function h(e,t,n){const i=t.codingStyleParameters,s={};return i.entropyCoderWithCustomPrecincts?(s.PPx=i.precinctsSizes[n].PPx,s.PPy=i.precinctsSizes[n].PPy):(s.PPx=15,s.PPy=15),s.xcb_=n>0?Math.min(i.xcb,s.PPx-1):Math.min(i.xcb,s.PPx),s.ycb_=n>0?Math.min(i.ycb,s.PPy-1):Math.min(i.ycb,s.PPy),s}function u(e,t,n){const i=1<<n.PPx,s=1<<n.PPy,r=0===t.resLevel,o=1<<n.PPx+(r?0:-1),a=1<<n.PPy+(r?0:-1),c=t.trx1>t.trx0?Math.ceil(t.trx1/i)-Math.floor(t.trx0/i):0,l=t.try1>t.try0?Math.ceil(t.try1/s)-Math.floor(t.try0/s):0,h=c*l;t.precinctParameters={precinctWidth:i,precinctHeight:s,numprecinctswide:c,numprecinctshigh:l,numprecincts:h,precinctWidthInSubband:o,precinctHeightInSubband:a}}function d(e,t,n){const i=n.xcb_,s=n.ycb_,r=1<<i,o=1<<s,a=t.tbx0>>i,c=t.tby0>>s,l=t.tbx1+r-1>>i,h=t.tby1+o-1>>s,u=t.resolution.precinctParameters,d=[],f=[];let p,g,m,b;for(g=c;g<h;g++)for(p=a;p<l;p++){if(m={cbx:p,cby:g,tbx0:r*p,tby0:o*g,tbx1:r*(p+1),tby1:o*(g+1)},m.tbx0_=Math.max(t.tbx0,m.tbx0),m.tby0_=Math.max(t.tby0,m.tby0),m.tbx1_=Math.min(t.tbx1,m.tbx1),m.tby1_=Math.min(t.tby1,m.tby1),b=Math.floor((m.tbx0_-t.tbx0)/u.precinctWidthInSubband)+Math.floor((m.tby0_-t.tby0)/u.precinctHeightInSubband)*u.numprecinctswide,m.precinctNumber=b,m.subbandType=t.type,m.Lblock=3,m.tbx1_<=m.tbx0_||m.tby1_<=m.tby0_)continue;d.push(m);let e=f[b];void 0!==e?(p<e.cbxMin?e.cbxMin=p:p>e.cbxMax&&(e.cbxMax=p),g<e.cbyMin?e.cbxMin=g:g>e.cbyMax&&(e.cbyMax=g)):f[b]=e={cbxMin:p,cbyMin:g,cbxMax:p,cbyMax:g},m.precinct=e}t.codeblockParameters={codeblockWidth:i,codeblockHeight:s,numcodeblockwide:l-a+1,numcodeblockhigh:h-c+1},t.codeblocks=d,t.precincts=f}function f(e,t,n){const i=[],s=e.subbands;for(let e=0,n=s.length;e<n;e++){const n=s[e].codeblocks;for(let e=0,s=n.length;e<s;e++){const s=n[e];s.precinctNumber===t&&i.push(s)}}return{layerNumber:n,codeblocks:i}}function p(e){const t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],s=i.codingStyleDefaultParameters.layersCount,r=t.Csiz;let a=0;for(let e=0;e<r;e++)a=Math.max(a,i.components[e].codingStyleParameters.decompositionLevelsCount);let c=0,l=0,h=0,u=0;this.nextPacket=function(){for(;c<s;c++){for(;l<=a;l++){for(;h<r;h++){const e=i.components[h];if(l>e.codingStyleParameters.decompositionLevelsCount)continue;const t=e.resolutions[l],n=t.precinctParameters.numprecincts;for(;u<n;){const e=f(t,u,c);return u++,e}u=0}h=0}l=0}throw new o("Out of packets")}}function g(e){const t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],s=i.codingStyleDefaultParameters.layersCount,r=t.Csiz;let a=0;for(let e=0;e<r;e++)a=Math.max(a,i.components[e].codingStyleParameters.decompositionLevelsCount);let c=0,l=0,h=0,u=0;this.nextPacket=function(){for(;c<=a;c++){for(;l<s;l++){for(;h<r;h++){const e=i.components[h];if(c>e.codingStyleParameters.decompositionLevelsCount)continue;const t=e.resolutions[c],n=t.precinctParameters.numprecincts;for(;u<n;){const e=f(t,u,l);return u++,e}u=0}h=0}l=0}throw new o("Out of packets")}}function m(e){const t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],s=i.codingStyleDefaultParameters.layersCount,r=t.Csiz;let a,c,l,h,u=0;for(l=0;l<r;l++){const e=i.components[l];u=Math.max(u,e.codingStyleParameters.decompositionLevelsCount)}const d=new Int32Array(u+1);for(c=0;c<=u;++c){let e=0;for(l=0;l<r;++l){const t=i.components[l].resolutions;c<t.length&&(e=Math.max(e,t[c].precinctParameters.numprecincts))}d[c]=e}a=0,c=0,l=0,h=0,this.nextPacket=function(){for(;c<=u;c++){for(;h<d[c];h++){for(;l<r;l++){const e=i.components[l];if(c>e.codingStyleParameters.decompositionLevelsCount)continue;const t=e.resolutions[c],n=t.precinctParameters.numprecincts;if(!(h>=n)){for(;a<s;){const e=f(t,h,a);return a++,e}a=0}}l=0}h=0}throw new o("Out of packets")}}function b(e){const t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],s=i.codingStyleDefaultParameters.layersCount,r=t.Csiz,a=w(i),c=a;let l=0,h=0,u=0,d=0,p=0;this.nextPacket=function(){for(;p<c.maxNumHigh;p++){for(;d<c.maxNumWide;d++){for(;u<r;u++){const e=i.components[u],t=e.codingStyleParameters.decompositionLevelsCount;for(;h<=t;h++){const t=e.resolutions[h],n=a.components[u].resolutions[h],i=x(d,p,n,c,t);if(null!==i){for(;l<s;){const e=f(t,i,l);return l++,e}l=0}}h=0}u=0}d=0}throw new o("Out of packets")}}function y(e){const t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],s=i.codingStyleDefaultParameters.layersCount,r=t.Csiz,a=w(i);let c=0,l=0,h=0,u=0,d=0;this.nextPacket=function(){for(;h<r;++h){const e=i.components[h],t=a.components[h],n=e.codingStyleParameters.decompositionLevelsCount;for(;d<t.maxNumHigh;d++){for(;u<t.maxNumWide;u++){for(;l<=n;l++){const n=e.resolutions[l],i=t.resolutions[l],r=x(u,d,i,t,n);if(null!==r){for(;c<s;){const e=f(n,r,c);return c++,e}c=0}}l=0}u=0}d=0}throw new o("Out of packets")}}function x(e,t,n,i,s){const r=e*i.minWidth,o=t*i.minHeight;if(r%n.width!=0||o%n.height!=0)return null;const a=o/n.width*s.precinctParameters.numprecinctswide;return r/n.height+a}function w(e){const t=e.components.length;let n=Number.MAX_VALUE,i=Number.MAX_VALUE,s=0,r=0;const o=new Array(t);for(let a=0;a<t;a++){const t=e.components[a],c=t.codingStyleParameters.decompositionLevelsCount,l=new Array(c+1);let h=Number.MAX_VALUE,u=Number.MAX_VALUE,d=0,f=0,p=1;for(let e=c;e>=0;--e){const n=t.resolutions[e],i=p*n.precinctParameters.precinctWidth,s=p*n.precinctParameters.precinctHeight;h=Math.min(h,i),u=Math.min(u,s),d=Math.max(d,n.precinctParameters.numprecinctswide),f=Math.max(f,n.precinctParameters.numprecinctshigh),l[e]={width:i,height:s},p<<=1}n=Math.min(n,h),i=Math.min(i,u),s=Math.max(s,d),r=Math.max(r,f),o[a]={resolutions:l,minWidth:h,minHeight:u,maxNumWide:d,maxNumHigh:f}}return{components:o,minWidth:n,minHeight:i,maxNumWide:s,maxNumHigh:r}}function C(e){const t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],s=t.Csiz;for(let e=0;e<s;e++){const t=i.components[e],n=t.codingStyleParameters.decompositionLevelsCount,s=[],r=[];for(let e=0;e<=n;e++){const i=h(0,t,e),o={},a=1<<n-e;let c;if(o.trx0=Math.ceil(t.tcx0/a),o.try0=Math.ceil(t.tcy0/a),o.trx1=Math.ceil(t.tcx1/a),o.try1=Math.ceil(t.tcy1/a),o.resLevel=e,u(0,o,i),s.push(o),0===e)c={},c.type="LL",c.tbx0=Math.ceil(t.tcx0/a),c.tby0=Math.ceil(t.tcy0/a),c.tbx1=Math.ceil(t.tcx1/a),c.tby1=Math.ceil(t.tcy1/a),c.resolution=o,d(0,c,i),r.push(c),o.subbands=[c];else{const s=1<<n-e+1,a=[];c={},c.type="HL",c.tbx0=Math.ceil(t.tcx0/s-.5),c.tby0=Math.ceil(t.tcy0/s),c.tbx1=Math.ceil(t.tcx1/s-.5),c.tby1=Math.ceil(t.tcy1/s),c.resolution=o,d(0,c,i),r.push(c),a.push(c),c={},c.type="LH",c.tbx0=Math.ceil(t.tcx0/s),c.tby0=Math.ceil(t.tcy0/s-.5),c.tbx1=Math.ceil(t.tcx1/s),c.tby1=Math.ceil(t.tcy1/s-.5),c.resolution=o,d(0,c,i),r.push(c),a.push(c),c={},c.type="HH",c.tbx0=Math.ceil(t.tcx0/s-.5),c.tby0=Math.ceil(t.tcy0/s-.5),c.tbx1=Math.ceil(t.tcx1/s-.5),c.tby1=Math.ceil(t.tcy1/s-.5),c.resolution=o,d(0,c,i),r.push(c),a.push(c),o.subbands=a}}t.resolutions=s,t.subbands=r}const r=i.codingStyleDefaultParameters.progressionOrder;switch(r){case 0:i.packetsIterator=new p(e);break;case 1:i.packetsIterator=new g(e);break;case 2:i.packetsIterator=new m(e);break;case 3:i.packetsIterator=new b(e);break;case 4:i.packetsIterator=new y(e);break;default:throw new o(`Unsupported progression order ${r}`)}}function T(e,t,n,i){let r,a=0,c=0,l=!1;function h(e){for(;c<e;){const e=t[n+a];a++,l?(r=r<<7|e,c+=7,l=!1):(r=r<<8|e,c+=8),255===e&&(l=!0)}return c-=e,r>>>c&(1<<e)-1}function u(e){return 255===t[n+a-1]&&t[n+a]===e?(d(1),!0):255===t[n+a]&&t[n+a+1]===e&&(d(2),!0)}function d(e){a+=e}function f(){c=0,l&&(a++,l=!1)}function p(){if(0===h(1))return 1;if(0===h(1))return 2;let e=h(2);return e<3?e+3:(e=h(5),e<31?e+6:(e=h(7),e+37))}const g=e.currentTile.index,m=e.tiles[g],b=e.COD.sopMarkerUsed,y=e.COD.ephMarkerUsed,x=m.packetsIterator;for(;a<i;){f(),b&&u(145)&&d(4);const e=x.nextPacket();if(!h(1))continue;const i=e.layerNumber,r=[];let c;for(let t=0,n=e.codeblocks.length;t<n;t++){c=e.codeblocks[t];let n=c.precinct;const a=c.cbx-n.cbxMin,l=c.cby-n.cbyMin;let u,d,f=!1,g=!1;if(void 0!==c.included)f=!!h(1);else{let e;if(n=c.precinct,void 0!==n.inclusionTree)e=n.inclusionTree;else{const t=n.cbxMax-n.cbxMin+1,s=n.cbyMax-n.cbyMin+1;e=new A(t,s,i),d=new k(t,s),n.inclusionTree=e,n.zeroBitPlanesTree=d;for(let e=0;e<i;e++)if(0!==h(1))throw new o("Invalid tag tree")}if(e.reset(a,l,i))for(;;){if(!h(1)){e.incrementValue(i);break}if(u=!e.nextLevel(),u){c.included=!0,f=g=!0;break}}}if(!f)continue;if(g){for(d=n.zeroBitPlanesTree,d.reset(a,l);;)if(h(1)){if(u=!d.nextLevel(),u)break}else d.incrementValue();c.zeroBitPlanes=d.value}const m=p();for(;h(1);)c.Lblock++;const b=(0,s.log2)(m),y=h((m<1<<b?b-1:b)+c.Lblock);r.push({codeblock:c,codingpasses:m,dataLength:y})}for(f(),y&&u(146);r.length>0;){const e=r.shift();c=e.codeblock,void 0===c.data&&(c.data=[]),c.data.push({data:t,start:n+a,end:n+a+e.dataLength,codingpasses:e.codingpasses}),a+=e.dataLength}}return a}function P(e,t,n,i,s,o,a,c){const l=i.tbx0,h=i.tby0,u=i.tbx1-i.tbx0,d=i.codeblocks,f="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?t:0;for(let n=0,g=d.length;n<g;++n){const g=d[n],m=g.tbx1_-g.tbx0_,b=g.tby1_-g.tby0_;if(0===m||0===b)continue;if(void 0===g.data)continue;const y=new E(m,b,g.subbandType,g.zeroBitPlanes,o);let x=2;const w=g.data;let C,T,P,S=0,I=0;for(C=0,T=w.length;C<T;C++)P=w[C],S+=P.end-P.start,I+=P.codingpasses;const k=new Uint8Array(S);let A=0;for(C=0,T=w.length;C<T;C++){P=w[C];const e=P.data.subarray(P.start,P.end);k.set(e,A),A+=e.length}const O=new r.ArithmeticDecoder(k,0,S);for(y.setDecoder(O),C=0;C<I;C++){switch(x){case 0:y.runSignificancePropagationPass();break;case 1:y.runMagnitudeRefinementPass();break;case 2:y.runCleanupPass(),c&&y.checkSegmentationSymbol()}x=(x+1)%3}let v=g.tbx0_-l+(g.tby0_-h)*u;const L=y.coefficentsSign,_=y.coefficentsMagnitude,D=y.bitsDecoded,B=a?0:.5;let M,R,F;A=0;const U="LL"!==i.type;for(C=0;C<b;C++){const n=2*(v/u|0)*(t-u)+f+p;for(M=0;M<m;M++)R=_[A],0!==R&&(R=(R+B)*s,0!==L[A]&&(R=-R),F=D[A],e[U?n+(v<<1):v]=a&&F>=o?R:R*(1<<o-F)),v++,A++;v+=u-m}}}function S(e,t,n){const i=t.components[n],s=i.codingStyleParameters,r=i.quantizationParameters,o=s.decompositionLevelsCount,c=r.SPqcds,l=r.scalarExpounded,h=r.guardBits,u=s.segmentationSymbolUsed,d=e.components[n].precision,f=s.reversibleTransformation,p=f?new L:new v,g=[];let m=0;for(let e=0;e<=o;e++){const t=i.resolutions[e],n=t.trx1-t.trx0,s=t.try1-t.try0,r=new Float32Array(n*s);for(let i=0,s=t.subbands.length;i<s;i++){let s,o;l?(s=c[m].mu,o=c[m].epsilon,m++):(s=c[0].mu,o=c[0].epsilon+(e>0?1-e:0));const p=t.subbands[i],g=a[p.type];P(r,n,0,p,f?1:2**(d+g-o)*(1+s/2048),h+o-1,f,u)}g.push({width:n,height:s,items:r})}const b=p.calculate(g,i.tcx0,i.tcy0);return{left:i.tcx0,top:i.tcy0,width:b.width,height:b.height,items:b.items}}function I(e,t){const n=e.SIZ.Csiz,i=e.tiles[t];for(let t=0;t<n;t++){const n=i.components[t],s=void 0!==e.currentTile.QCC[t]?e.currentTile.QCC[t]:e.currentTile.QCD;n.quantizationParameters=s;const r=void 0!==e.currentTile.COC[t]?e.currentTile.COC[t]:e.currentTile.COD;n.codingStyleParameters=r}i.codingStyleDefaultParameters=e.currentTile.COD}t.JpxImage=class{constructor(){this.failOnCorruptedImage=!1}parse(e){if(65359===(0,s.readUint16)(e,0))return void this.parseCodestream(e,0,e.length);const t=e.length;let n=0;for(;n<t;){let r=8,a=(0,s.readUint32)(e,n);const c=(0,s.readUint32)(e,n+4);if(n+=r,1===a&&(a=4294967296*(0,s.readUint32)(e,n)+(0,s.readUint32)(e,n+4),n+=8,r+=8),0===a&&(a=t-n+r),a<r)throw new o("Invalid box field size");const l=a-r;let h=!0;switch(c){case 1785737832:h=!1;break;case 1668246642:const t=e[n];if(1===t){const t=(0,s.readUint32)(e,n+3);switch(t){case 16:case 17:case 18:break;default:(0,i.warn)("Unknown colorspace "+t)}}else 2===t&&(0,i.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(e,n,n+l);break;case 1783636e3:218793738!==(0,s.readUint32)(e,n)&&(0,i.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const r=String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,255&c);(0,i.warn)(`Unsupported header type ${c} (${r}).`)}h&&(n+=l)}}parseImageProperties(e){let t=e.getByte();for(;t>=0;){const n=t;if(t=e.getByte(),65361==(n<<8|t)){e.skip(4);const t=e.getInt32()>>>0,n=e.getInt32()>>>0,i=e.getInt32()>>>0,s=e.getInt32()>>>0;e.skip(16);const r=e.getUint16();return this.width=t-i,this.height=n-s,this.componentsCount=r,void(this.bitsPerComponent=8)}}throw new o("No size marker found in JPX stream")}parseCodestream(e,t,n){const r={};let a=!1;try{let o=t;for(;o+1<n;){const t=(0,s.readUint16)(e,o);o+=2;let n,h,u,d,f,p,g=0;switch(t){case 65359:r.mainHeader=!0;break;case 65497:break;case 65361:g=(0,s.readUint16)(e,o);const m={};m.Xsiz=(0,s.readUint32)(e,o+4),m.Ysiz=(0,s.readUint32)(e,o+8),m.XOsiz=(0,s.readUint32)(e,o+12),m.YOsiz=(0,s.readUint32)(e,o+16),m.XTsiz=(0,s.readUint32)(e,o+20),m.YTsiz=(0,s.readUint32)(e,o+24),m.XTOsiz=(0,s.readUint32)(e,o+28),m.YTOsiz=(0,s.readUint32)(e,o+32);const b=(0,s.readUint16)(e,o+36);m.Csiz=b;const y=[];n=o+38;for(let t=0;t<b;t++){const t={precision:1+(127&e[n]),isSigned:!!(128&e[n]),XRsiz:e[n+1],YRsiz:e[n+2]};n+=3,c(t,m),y.push(t)}r.SIZ=m,r.components=y,l(r,y),r.QCC=[],r.COC=[];break;case 65372:g=(0,s.readUint16)(e,o);const x={};switch(n=o+2,h=e[n++],31&h){case 0:d=8,f=!0;break;case 1:d=16,f=!1;break;case 2:d=16,f=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(x.noQuantization=8===d,x.scalarExpounded=f,x.guardBits=h>>5,u=[];n<g+o;){const t={};8===d?(t.epsilon=e[n++]>>3,t.mu=0):(t.epsilon=e[n]>>3,t.mu=(7&e[n])<<8|e[n+1],n+=2),u.push(t)}x.SPqcds=u,r.mainHeader?r.QCD=x:(r.currentTile.QCD=x,r.currentTile.QCC=[]);break;case 65373:g=(0,s.readUint16)(e,o);const w={};let P;switch(n=o+2,r.SIZ.Csiz<257?P=e[n++]:(P=(0,s.readUint16)(e,n),n+=2),h=e[n++],31&h){case 0:d=8,f=!0;break;case 1:d=16,f=!1;break;case 2:d=16,f=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(w.noQuantization=8===d,w.scalarExpounded=f,w.guardBits=h>>5,u=[];n<g+o;){const t={};8===d?(t.epsilon=e[n++]>>3,t.mu=0):(t.epsilon=e[n]>>3,t.mu=(7&e[n])<<8|e[n+1],n+=2),u.push(t)}w.SPqcds=u,r.mainHeader?r.QCC[P]=w:r.currentTile.QCC[P]=w;break;case 65362:g=(0,s.readUint16)(e,o);const S={};n=o+2;const k=e[n++];S.entropyCoderWithCustomPrecincts=!!(1&k),S.sopMarkerUsed=!!(2&k),S.ephMarkerUsed=!!(4&k),S.progressionOrder=e[n++],S.layersCount=(0,s.readUint16)(e,n),n+=2,S.multipleComponentTransform=e[n++],S.decompositionLevelsCount=e[n++],S.xcb=2+(15&e[n++]),S.ycb=2+(15&e[n++]);const A=e[n++];if(S.selectiveArithmeticCodingBypass=!!(1&A),S.resetContextProbabilities=!!(2&A),S.terminationOnEachCodingPass=!!(4&A),S.verticallyStripe=!!(8&A),S.predictableTermination=!!(16&A),S.segmentationSymbolUsed=!!(32&A),S.reversibleTransformation=e[n++],S.entropyCoderWithCustomPrecincts){const t=[];for(;n<g+o;){const i=e[n++];t.push({PPx:15&i,PPy:i>>4})}S.precinctsSizes=t}const E=[];S.selectiveArithmeticCodingBypass&&E.push("selectiveArithmeticCodingBypass"),S.resetContextProbabilities&&E.push("resetContextProbabilities"),S.terminationOnEachCodingPass&&E.push("terminationOnEachCodingPass"),S.verticallyStripe&&E.push("verticallyStripe"),S.predictableTermination&&E.push("predictableTermination"),E.length>0&&(a=!0,(0,i.warn)(`JPX: Unsupported COD options (${E.join(", ")}).`)),r.mainHeader?r.COD=S:(r.currentTile.COD=S,r.currentTile.COC=[]);break;case 65424:g=(0,s.readUint16)(e,o),p={},p.index=(0,s.readUint16)(e,o+2),p.length=(0,s.readUint32)(e,o+4),p.dataEnd=p.length+o-2,p.partIndex=e[o+8],p.partsCount=e[o+9],r.mainHeader=!1,0===p.partIndex&&(p.COD=r.COD,p.COC=r.COC.slice(0),p.QCD=r.QCD,p.QCC=r.QCC.slice(0)),r.currentTile=p;break;case 65427:p=r.currentTile,0===p.partIndex&&(I(r,p.index),C(r)),g=p.dataEnd-o,T(r,e,o,g);break;case 65363:(0,i.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:g=(0,s.readUint16)(e,o);break;default:throw new Error("Unknown codestream code: "+t.toString(16))}o+=g}}catch(e){if(a||this.failOnCorruptedImage)throw new o(e.message);(0,i.warn)(`JPX: Trying to recover from: "${e.message}".`)}this.tiles=function(e){const t=e.SIZ,n=e.components,i=t.Csiz,s=[];for(let t=0,r=e.tiles.length;t<r;t++){const r=e.tiles[t],o=[];for(let t=0;t<i;t++)o[t]=S(e,r,t);const a=o[0],c=new Uint8ClampedArray(a.items.length*i),l={left:a.left,top:a.top,width:a.width,height:a.height,items:c};let h,u,d,f,p,g,m,b=0;if(r.codingStyleDefaultParameters.multipleComponentTransform){const e=4===i,t=o[0].items,s=o[1].items,a=o[2].items,l=e?o[3].items:null;h=n[0].precision-8,u=.5+(128<<h);const y=r.components[0],x=i-3;if(f=t.length,y.codingStyleParameters.reversibleTransformation)for(d=0;d<f;d++,b+=x){p=t[d]+u,g=s[d],m=a[d];const e=p-(m+g>>2);c[b++]=e+m>>h,c[b++]=e>>h,c[b++]=e+g>>h}else for(d=0;d<f;d++,b+=x)p=t[d]+u,g=s[d],m=a[d],c[b++]=p+1.402*m>>h,c[b++]=p-.34413*g-.71414*m>>h,c[b++]=p+1.772*g>>h;if(e)for(d=0,b=3;d<f;d++,b+=4)c[b]=l[d]+u>>h}else for(let e=0;e<i;e++){const t=o[e].items;for(h=n[e].precision-8,u=.5+(128<<h),b=e,d=0,f=t.length;d<f;d++)c[b]=t[d]+u>>h,b+=i}s.push(l)}return s}(r),this.width=r.SIZ.Xsiz-r.SIZ.XOsiz,this.height=r.SIZ.Ysiz-r.SIZ.YOsiz,this.componentsCount=r.SIZ.Csiz}};class k{constructor(e,t){const n=(0,s.log2)(Math.max(e,t))+1;this.levels=[];for(let i=0;i<n;i++){const n={width:e,height:t,items:[]};this.levels.push(n),e=Math.ceil(e/2),t=Math.ceil(t/2)}}reset(e,t){let n,i=0,s=0;for(;i<this.levels.length;){n=this.levels[i];const r=e+t*n.width;if(void 0!==n.items[r]){s=n.items[r];break}n.index=r,e>>=1,t>>=1,i++}i--,n=this.levels[i],n.items[n.index]=s,this.currentLevel=i,delete this.value}incrementValue(){const e=this.levels[this.currentLevel];e.items[e.index]++}nextLevel(){let e=this.currentLevel,t=this.levels[e];const n=t.items[t.index];return e--,e<0?(this.value=n,!1):(this.currentLevel=e,t=this.levels[e],t.items[t.index]=n,!0)}}class A{constructor(e,t,n){const i=(0,s.log2)(Math.max(e,t))+1;this.levels=[];for(let s=0;s<i;s++){const i=new Uint8Array(e*t);for(let e=0,t=i.length;e<t;e++)i[e]=n;const s={width:e,height:t,items:i};this.levels.push(s),e=Math.ceil(e/2),t=Math.ceil(t/2)}}reset(e,t,n){let i=0;for(;i<this.levels.length;){const s=this.levels[i],r=e+t*s.width;s.index=r;const o=s.items[r];if(255===o)break;if(o>n)return this.currentLevel=i,this.propagateValues(),!1;e>>=1,t>>=1,i++}return this.currentLevel=i-1,!0}incrementValue(e){const t=this.levels[this.currentLevel];t.items[t.index]=e+1,this.propagateValues()}propagateValues(){let e=this.currentLevel,t=this.levels[e];const n=t.items[t.index];for(;--e>=0;)t=this.levels[e],t.items[t.index]=n}nextLevel(){let e=this.currentLevel,t=this.levels[e];const n=t.items[t.index];return t.items[t.index]=255,e--,!(e<0||(this.currentLevel=e,t=this.levels[e],t.items[t.index]=n,0))}}const E=function(){const e=17,t=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),n=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),i=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return class{constructor(e,s,r,o,a){let c;this.width=e,this.height=s,c="HH"===r?i:"HL"===r?n:t,this.contextLabelTable=c;const l=e*s;let h;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),h=a>14?new Uint32Array(l):a>6?new Uint16Array(l):new Uint8Array(l),this.coefficentsMagnitude=h,this.processingFlags=new Uint8Array(l);const u=new Uint8Array(l);if(0!==o)for(let e=0;e<l;e++)u[e]=o;this.bitsDecoded=u,this.reset()}setDecoder(e){this.decoder=e}reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6}setNeighborsSignificance(e,t,n){const i=this.neighborsSignificance,s=this.width,r=this.height,o=t>0,a=t+1<s;let c;e>0&&(c=n-s,o&&(i[c-1]+=16),a&&(i[c+1]+=16),i[c]+=4),e+1<r&&(c=n+s,o&&(i[c-1]+=16),a&&(i[c+1]+=16),i[c]+=4),o&&(i[n-1]+=1),a&&(i[n+1]+=1),i[n]|=128}runSignificancePropagationPass(){const e=this.decoder,t=this.width,n=this.height,i=this.coefficentsMagnitude,s=this.coefficentsSign,r=this.neighborsSignificance,o=this.processingFlags,a=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded;for(let h=0;h<n;h+=4)for(let u=0;u<t;u++){let d=h*t+u;for(let f=0;f<4;f++,d+=t){const t=h+f;if(t>=n)break;if(o[d]&=-2,i[d]||!r[d])continue;const p=c[r[d]];if(e.readBit(a,p)){const e=this.decodeSignBit(t,u,d);s[d]=e,i[d]=1,this.setNeighborsSignificance(t,u,d),o[d]|=2}l[d]++,o[d]|=1}}}decodeSignBit(e,t,n){const i=this.width,s=this.height,r=this.coefficentsMagnitude,o=this.coefficentsSign;let a,c,l,h,u,d;h=t>0&&0!==r[n-1],t+1<i&&0!==r[n+1]?(l=o[n+1],h?(c=o[n-1],a=1-l-c):a=1-l-l):h?(c=o[n-1],a=1-c-c):a=0;const f=3*a;return h=e>0&&0!==r[n-i],e+1<s&&0!==r[n+i]?(l=o[n+i],h?(c=o[n-i],a=1-l-c+f):a=1-l-l+f):h?(c=o[n-i],a=1-c-c+f):a=f,a>=0?(u=9+a,d=this.decoder.readBit(this.contexts,u)):(u=9-a,d=1^this.decoder.readBit(this.contexts,u)),d}runMagnitudeRefinementPass(){const e=this.decoder,t=this.width,n=this.height,i=this.coefficentsMagnitude,s=this.neighborsSignificance,r=this.contexts,o=this.bitsDecoded,a=this.processingFlags,c=t*n,l=4*t;for(let n,h=0;h<c;h=n){n=Math.min(c,h+l);for(let c=0;c<t;c++)for(let l=h+c;l<n;l+=t){if(!i[l]||0!=(1&a[l]))continue;let t=16;0!=(2&a[l])&&(a[l]^=2,t=0==(127&s[l])?15:14);const n=e.readBit(r,t);i[l]=i[l]<<1|n,o[l]++,a[l]|=1}}}runCleanupPass(){const t=this.decoder,n=this.width,i=this.height,s=this.neighborsSignificance,r=this.coefficentsMagnitude,o=this.coefficentsSign,a=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,h=this.processingFlags,u=n,d=2*n,f=3*n;let p;for(let g=0;g<i;g=p){p=Math.min(g+4,i);const m=g*n,b=g+3<i;for(let i=0;i<n;i++){const y=m+i;let x,w=0,C=y,T=g;if(b&&0===h[y]&&0===h[y+u]&&0===h[y+d]&&0===h[y+f]&&0===s[y]&&0===s[y+u]&&0===s[y+d]&&0===s[y+f]){if(!t.readBit(a,18)){l[y]++,l[y+u]++,l[y+d]++,l[y+f]++;continue}w=t.readBit(a,e)<<1|t.readBit(a,e),0!==w&&(T=g+w,C+=w*n),x=this.decodeSignBit(T,i,C),o[C]=x,r[C]=1,this.setNeighborsSignificance(T,i,C),h[C]|=2,C=y;for(let e=g;e<=T;e++,C+=n)l[C]++;w++}for(T=g+w;T<p;T++,C+=n){if(r[C]||0!=(1&h[C]))continue;const e=c[s[C]];1===t.readBit(a,e)&&(x=this.decodeSignBit(T,i,C),o[C]=x,r[C]=1,this.setNeighborsSignificance(T,i,C),h[C]|=2),l[C]++}}}}checkSegmentationSymbol(){const t=this.decoder,n=this.contexts;if(10!=(t.readBit(n,e)<<3|t.readBit(n,e)<<2|t.readBit(n,e)<<1|t.readBit(n,e)))throw new o("Invalid segmentation symbol")}}}();class O{constructor(){this.constructor===O&&(0,i.unreachable)("Cannot initialize Transform.")}calculate(e,t,n){let i=e[0];for(let s=1,r=e.length;s<r;s++)i=this.iterate(i,e[s],t,n);return i}extend(e,t,n){let i=t-1,s=t+1,r=t+n-2,o=t+n;e[i--]=e[s++],e[o++]=e[r--],e[i--]=e[s++],e[o++]=e[r--],e[i--]=e[s++],e[o++]=e[r--],e[i]=e[s],e[o]=e[r]}filter(e,t,n){(0,i.unreachable)("Abstract method `filter` called")}iterate(e,t,n,i){const s=e.width,r=e.height;let o=e.items;const a=t.width,c=t.height,l=t.items;let h,u,d,f,p,g;for(d=0,h=0;h<r;h++)for(f=2*h*a,u=0;u<s;u++,d++,f+=2)l[f]=o[d];o=e.items=null;const m=new Float32Array(a+8);if(1===a){if(0!=(1&n))for(g=0,d=0;g<c;g++,d+=a)l[d]*=.5}else for(g=0,d=0;g<c;g++,d+=a)m.set(l.subarray(d,d+a),4),this.extend(m,4,a),this.filter(m,4,a),l.set(m.subarray(4,4+a),d);let b=16;const y=[];for(h=0;h<b;h++)y.push(new Float32Array(c+8));let x,w=0;if(e=4+c,1===c){if(0!=(1&i))for(p=0;p<a;p++)l[p]*=.5}else for(p=0;p<a;p++){if(0===w){for(b=Math.min(a-p,b),d=p,f=4;f<e;d+=a,f++)for(x=0;x<b;x++)y[x][f]=l[d+x];w=b}w--;const t=y[w];if(this.extend(t,4,c),this.filter(t,4,c),0===w)for(d=p-b+1,f=4;f<e;d+=a,f++)for(x=0;x<b;x++)l[d+x]=y[x][f]}return{width:a,height:c,items:l}}}class v extends O{filter(e,t,n){const i=n>>1;let s,r,o,a;const c=-1.586134342059924,l=-.052980118572961,h=.882911075530934,u=.443506852043971,d=1.230174104914001;for(s=(t|=0)-3,r=i+4;r--;s+=2)e[s]*=.8128930661159609;for(s=t-2,o=u*e[s-1],r=i+3;r--&&(a=u*e[s+1],e[s]=d*e[s]-o-a,r--);s+=2)s+=2,o=u*e[s+1],e[s]=d*e[s]-o-a;for(s=t-1,o=h*e[s-1],r=i+2;r--&&(a=h*e[s+1],e[s]-=o+a,r--);s+=2)s+=2,o=h*e[s+1],e[s]-=o+a;for(s=t,o=l*e[s-1],r=i+1;r--&&(a=l*e[s+1],e[s]-=o+a,r--);s+=2)s+=2,o=l*e[s+1],e[s]-=o+a;if(0!==i)for(s=t+1,o=c*e[s-1],r=i;r--&&(a=c*e[s+1],e[s]-=o+a,r--);s+=2)s+=2,o=c*e[s+1],e[s]-=o+a}}class L extends O{filter(e,t,n){const i=n>>1;let s,r;for(s=t|=0,r=i+1;r--;s+=2)e[s]-=e[s-1]+e[s+1]+2>>2;for(s=t+1,r=i;r--;s+=2)e[s]+=e[s-1]+e[s+1]>>1}}}],t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Jbig2Image",{enumerable:!0,get:function(){return s.Jbig2Image}}),Object.defineProperty(e,"JpegImage",{enumerable:!0,get:function(){return r.JpegImage}}),Object.defineProperty(e,"JpxImage",{enumerable:!0,get:function(){return o.JpxImage}}),Object.defineProperty(e,"getVerbosityLevel",{enumerable:!0,get:function(){return t.getVerbosityLevel}}),Object.defineProperty(e,"setVerbosityLevel",{enumerable:!0,get:function(){return t.setVerbosityLevel}});var t=n(1),s=n(4),r=n(10),o=n(11)})(),i})()}));