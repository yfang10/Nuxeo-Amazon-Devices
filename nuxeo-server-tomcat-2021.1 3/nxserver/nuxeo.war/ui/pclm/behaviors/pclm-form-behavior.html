<script>
  var Nuxeo = Nuxeo || {};
  (function() {

    /**
     * @polymerBehavior Nuxeo.PclmFormBehavior
     */
    Nuxeo.PclmFormBehavior = {
      
      _propertyDeepfind: function(properties, path){
        var value = properties;
        var segments =path.split('.');
        
        segments.forEach(function(segment) {
          value = value ? value[segment] : value;
        });
        
        return value;
      },

      _isEmpty: function(doc,path) {
        var value = this._propertyDeepfind(doc.properties,path);
        return value === undefined || value === null || (value.length !== undefined && value.length===0);
      },

      _hasValueForPrefix: function(doc,prefix) {
        var hasValue = false;
        for (var property in doc.properties) {
          if (property.startsWith(prefix) && !this._isEmpty(doc,property)) {
            hasValue = true;
          }
        }
        return hasValue;
      }

    };
  })();
</script>
