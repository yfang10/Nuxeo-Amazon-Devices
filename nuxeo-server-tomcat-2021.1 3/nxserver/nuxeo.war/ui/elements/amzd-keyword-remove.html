<dom-module id="amzd-keyword-remove">
  <template>
    <style>
      :host {
        display: inline-block;
        background-color: var(--nuxeo-tag-background, transparent);
        color: var(--nuxeo-default-text, #000);
        padding: 4px 6px;
        font-size: .8rem;
        margin-bottom: .3em;
        border-radius: 2em;
        line-height: initial;
        text-decoration: none;
        @apply --nuxeo-tag;
      }

      :host([uppercase]) {
        text-transform: uppercase;
      }

      iron-icon {
        width: 14px;
        height: 14px;
        margin: 0;
        padding: 0;
      }

      :host([flagged]) span {
        text-decoration: line-through;
      }
      
    </style>

    <dom-if if="[[icon]]">
      <template>
        <iron-icon icon="[[icon]]"></iron-icon>
      </template>
    </dom-if>
    <span><slot></slot></span>

  </template>

  <script>
    {
      /** 
       */
      class KeywordRemove extends Nuxeo.Element {

        static get is() {
          return 'amzd-keyword-remove';
        }

        static get properties() {
          return {
            /**
             * Icon to use (iconset_name:icon_name).
             */
            icon: String,

            flagged: {
              type: Boolean,
              value: false,
              notify: true,
              reflectToAttribute: true
            },

            /**
             * Function called when an entry is flagged.
             */
             flaggedHandler: {
              type: Function,
            }
          };
        }

        constructor() {
          super()
          this.addEventListener('click', this._toggle.bind(this))
        }

        _toggle(e) {
          this.flagged = !this.flagged
          this.flaggedHandler(e.target.innerText);
        }

      }

      customElements.define(KeywordRemove.is, KeywordRemove)
      Nuxeo.KeywordRemove = KeywordRemove
    
    }
  </script>

</dom-module>