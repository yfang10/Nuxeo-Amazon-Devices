<link rel="import" href="../../elements/nuxeo-se-collapse.html">

<!--
`nuxeo-deviceasset-edit-layout`
@group Nuxeo UI
@element nuxeo-deviceasset-edit-layout
-->
<dom-module id="nuxeo-deviceasset-edit-layout">
  <template>
    <style>
      *[role=widget] {
        padding: 5px;
      }
    </style>


    <nuxeo-input value="{{document.properties.dc:title}}" label="Title" type="text" required="true" role="widget"></nuxeo-input>

    <nuxeo-input value="{{document.properties.dc:description}}" label="Description" type="text" role="widget"></nuxeo-input>

    <nuxeo-directory-suggestion value="{{document.properties.amz:asset_category}}" label="Asset Category" directory-name="AssetCategory" role="widget" min-chars="0"></nuxeo-directory-suggestion>

    <template is="dom-if" if="{{document.properties.amz:asset_category}}">
      <nuxeo-directory-suggestion id="assetType" value="{{document.properties.amz:asset_type}}" label="Asset Type" directory-name="{{category}}" role="widget" min-chars="0"></nuxeo-directory-suggestion>
    </template>

    <amzd-amazon-create-layout document="{{document}}"></amzd-amazon-create-layout>

    <pclm-usage-edit-layout document="{{document}}"></pclm-usage-edit-layout>

    <pclm-relations-edit-layout document="{{document}}"></pclm-relations-edit-layout>

    <nuxeo-directory-suggestion role="widget" value="{{document.properties.approval:distribute_ADH}}" label="Distribute Content to Amazon Device Hub" directory-name="Yes_No_Vocabulary" min-chars="0"></nuxeo-directory-suggestion>

    <nuxeo-directory-suggestion role="widget" value="{{document.properties.approval:distribute_selects}}" label="Distribute Selects for CXLab Use" directory-name="Yes_No_Vocabulary" min-chars="0"></nuxeo-directory-suggestion>

    <nuxeo-directory-suggestion role="widget" value="{{document.properties.approval:distribute_CXLabs}}" label="Distribute Final Content for CXLab Use" directory-name="Yes_No_Vocabulary" min-chars="0"></nuxeo-directory-suggestion>


  </template>

  <script>
  Polymer({
    is: 'nuxeo-deviceasset-edit-layout',
    behaviors: [Nuxeo.LayoutBehavior],
    properties: {

      /**
         * @doctype DeviceAsset
         */
      document: {
        type: Object,
      },
      category: {
        type: String,
        computed: '_getAssetType(document.properties.amz:asset_category)',
      }

    },

    _getAssetType:function(assetType) {
      if(assetType && assetType.id !== undefined) {
        return assetType.id;
      }
      else {
        return assetType;
      }
    },
    _clearAssetType: function(event){
      // clear the value of asset_type selection
      this.$$('#assetType').value = "";
    }
  });
  </script>
</dom-module>
